!function(){var n={292:function(e,a,t){function n(){var e;try{e=a.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(a=e.exports=t(765)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},a.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+a.humanize(this.diff),!t)return;t="color: "+this.color;e.splice(1,0,t,"color: inherit");var n=0,r=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(r=n))}),e.splice(r,0,t)},a.save=function(e){try{null==e?a.storage.removeItem("debug"):a.storage.debug=e}catch(e){}},a.load=n,a.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},a.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),a.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],a.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},a.enable(n())},765:function(e,s,t){var l;function n(e){function i(){if(i.enabled){var r=i,e=+new Date,t=e-(l||e);r.diff=t,r.prev=l,r.curr=e,l=e;for(var a=new Array(arguments.length),n=0;n<a.length;n++)a[n]=arguments[n];a[0]=s.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var o=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;o++;var n=s.formatters[t];return"function"==typeof n&&(t=a[o],e=n.call(r,t),a.splice(o,1),o--),e}),s.formatArgs.call(r,a),(i.log||s.log||console.log.bind(console)).apply(r,a)}}return i.namespace=e,i.enabled=s.enabled(e),i.useColors=s.useColors(),i.color=function(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return s.colors[Math.abs(n)%s.colors.length]}(e),"function"==typeof s.init&&s.init(i),i}(s=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},s.disable=function(){s.enable("")},s.enable=function(e){s.save(e),s.names=[],s.skips=[];for(var t=("string"==typeof e?e:"").split(/[\s,]+/),n=t.length,r=0;r<n;r++)t[r]&&("-"===(e=t[r].replace(/\*/g,".*?"))[0]?s.skips.push(new RegExp("^"+e.substr(1)+"$")):s.names.push(new RegExp("^"+e+"$")))},s.enabled=function(e){var t,n;for(t=0,n=s.skips.length;t<n;t++)if(s.skips[t].test(e))return!1;for(t=0,n=s.names.length;t<n;t++)if(s.names[t].test(e))return!0;return!1},s.humanize=t(628),s.names=[],s.skips=[],s.formatters={}},204:function(e){function o(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function i(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}e.exports=function(e,t,n){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("script");"function"==typeof t&&(n=t,t={}),t=t||{},n=n||function(){},a.type=t.type||"text/javascript",a.charset=t.charset||"utf8",a.async=!("async"in t)||!!t.async,a.src=e,t.attrs&&function(e,t){for(var n in t)e.setAttribute(n,t[n])}(a,t.attrs),t.text&&(a.text=""+t.text),("onload"in a?o:i)(a,n),a.onload||o(a,n),r.appendChild(a)}},628:function(e){var r=36e5,a=864e5;function o(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var n=typeof e;if("string"==n&&0<e.length)return function(e){if(100<(e=String(e)).length)return;e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!e)return;var t=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*t;case"days":case"day":case"d":return t*a;case"hours":case"hour":case"hrs":case"hr":case"h":return t*r;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*t;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}(e);if("number"==n&&!1===isNaN(e))return t.long?o(t=e,a,"day")||o(t,r,"hour")||o(t,6e4,"minute")||o(t,1e3,"second")||t+" ms":function(e){if(a<=e)return Math.round(e/a)+"d";if(r<=e)return Math.round(e/r)+"h";if(6e4<=e)return Math.round(e/6e4)+"m";if(1e3<=e)return Math.round(e/1e3)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},438:function(e){"use strict";var
/**
* @link https://github.com/gajus/sister for the canonical source repository
* @license https://github.com/gajus/sister/blob/master/LICENSE BSD 3-Clause
*/
t=function(){var e={},a={};return e.on=function(e,t){t={name:e,handler:t};return a[e]=a[e]||[],a[e].unshift(t),t},e.off=function(e){var t=a[e.name].indexOf(e);-1!==t&&a[e.name].splice(t,1)},e.trigger=function(e,t){var n,r=a[e];if(r)for(n=r.length;n--;)r[n].handler(t)},e};e.exports=t},771:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(606),n=(r=a)&&r.__esModule?r:{default:r};t.default={pauseVideo:{acceptableStates:[n.default.ENDED,n.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[n.default.ENDED,n.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[n.default.ENDED,n.default.PLAYING,n.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},e.exports=t.default},368:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(292)),l=a(n(376)),s=a(n(645)),u=a(n(771));function a(e){return e&&e.__esModule?e:{default:e}}var c=(0,r.default)("youtube-player"),r={};r.proxyEvents=function(r){var e={},t=!0,n=!1,a=void 0;try{for(var o,i=s.default[Symbol.iterator]();!(t=(o=i.next()).done);t=!0)!function(t){var n="on"+t.slice(0,1).toUpperCase()+t.slice(1);e[n]=function(e){c('event "%s"',n,e),r.trigger(t,e)}}(o.value)}catch(e){n=!0,a=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw a}}return e},r.promisifyPlayer=function(a){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],t={},n=!0,r=!1,o=void 0;try{for(var i,s=l.default[Symbol.iterator]();!(n=(i=s.next()).done);n=!0)!function(r){e&&u.default[r]?t[r]=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return a.then(function(a){var o=u.default[r],e=a.getPlayerState(),t=a[r].apply(a,n);return o.stateChangeRequired||Array.isArray(o.acceptableStates)&&-1===o.acceptableStates.indexOf(e)?new Promise(function(n){function r(){var e=a.getPlayerState(),t=void 0;"number"==typeof o.timeout&&(t=setTimeout(function(){a.removeEventListener("onStateChange",r),n()},o.timeout)),Array.isArray(o.acceptableStates)&&-1!==o.acceptableStates.indexOf(e)&&(a.removeEventListener("onStateChange",r),clearTimeout(t),n())}a.addEventListener("onStateChange",r)}).then(function(){return t}):t})}:t[r]=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return a.then(function(e){return e[r].apply(e,t)})}}(i.value)}catch(e){r=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return t},t.default=r,e.exports=t.default},606:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},e.exports=t.default},645:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],e.exports=t.default},376:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe"],e.exports=t.default},640:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=r(n(438)),l=r(n(341)),u=r(n(368));function r(e){return e&&e.__esModule?e:{default:e}}var c=void 0;t.default=function(r){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=2<arguments.length&&void 0!==arguments[2]&&arguments[2],o=(0,s.default)();if(c=c||(0,l.default)(o),a.events)throw new Error("Event handlers cannot be overwritten.");if("string"==typeof r&&!document.getElementById(r))throw new Error('Element "'+r+'" does not exist.');a.events=u.default.proxyEvents(o);var t=new Promise(function(n){"object"===(void 0===r?"undefined":i(r))&&r.playVideo instanceof Function?n(r):c.then(function(e){var t=new e.Player(r,a);return o.on("ready",function(){n(t)}),null})}),e=u.default.promisifyPlayer(t,e);return e.on=o.on,e.off=o.off,e},e.exports=t.default},341:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(204),o=(r=a)&&r.__esModule?r:{default:r};t.default=function(r){return new Promise(function(e){var t,n;window.YT&&window.YT.Player&&window.YT.Player instanceof Function?e(window.YT):(t="http:"===window.location.protocol?"http:":"https:",(0,o.default)(t+"//www.youtube.com/iframe_api",function(e){e&&r.trigger("error",e)}),n=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=function(){n&&n(),e(window.YT)})})},e.exports=t.default},779:function(e,t){var n;
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/
!function(){"use strict";var i={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r,a=typeof n;if("string"==a||"number"==a)e.push(n);else if(Array.isArray(n))!n.length||(r=s.apply(null,n))&&e.push(r);else if("object"==a)if(n.toString===Object.prototype.toString||n.toString.toString().includes("[native code]"))for(var o in n)i.call(n,o)&&n[o]&&e.push(o);else e.push(n.toString())}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):void 0===(n=function(){return s}.apply(t,[]))||(e.exports=n)}()}},r={};function xa(e){if(r[e])return r[e].exports;var t=r[e]={exports:{}};return n[e](t,t.exports,xa),t.exports}xa.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return xa.d(t,{a:t}),t},xa.d=function(e,t){for(var n in t)xa.o(t,n)&&!xa.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},xa.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var c=CoreUtilities,te=React,ne=xa.n(te),e=ReactDOM,g=xa.n(e),f=ReactRouterDOM,t=ReactUtilities,n={common:["CommonUI.Features","Common.GameSorts"],feature:"Feature.GamePage"},r=n,m=Roblox,I=HeaderScripts,a=xa(779),re=xa.n(a),P=ReactStyleGuide,o=PropTypes,i=xa.n(o),x=CoreRobloxUtilities,s=null!==m.CurrentUser&&void 0!==m.CurrentUser&&m.CurrentUser.userId?"gameSort_".concat(m.CurrentUser.userId):"gameSort_guest",l=m.EnvironmentUrls.gamesApi,T={gamesDefaultSortAlgorithm:"GamesDefaultSorts",gamesHomeSortAlgorithm:"HomeSorts",pageSizeOfHomeSorts:12,pageSize:40,getGameSortsWithDetaultSorts:{url:"".concat(l,"/v1/games/sorts"),withCredentials:!0},getGamesList:{url:"".concat(l,"/v1/games/list"),withCredentials:!0},getGameMedias:function(e){return{url:"".concat(l,"/v2/games/").concat(e,"/media"),withCredentials:!0}},getPlayabilityStatus:{url:"".concat(l,"/v1/games/multiget-playability-status"),withCredentials:!0},getRecommendedGames:function(e){return{url:"".concat(l,"/v1/games/recommendations/game/").concat(e),withCredentials:!0}},params:{sortToken:null,keyword:null,exclusiveStartId:null,isKeywordSuggestionEnabled:!0,hasMoreRows:!0,startRows:0,maxRows:60,gameSetTargetId:null},recommendedGamesParams:{maxRows:6},mediaTypes:{image:"Image",youtube:"YouTubeVideo"}},u=m.EnvironmentUrls.apiGatewayUrl,p={exploreApiSupportSortNames:["Curated_56","Curated_57","Curated_58","Curated_62","Curated_63","Curated_64","Curated_67","Curated_68","Curated_71","Curated_72","Curated_81","Curated_94","Curated_95","Curated_96","Curated_97","Curated_101","Curated_102","Curated_103","Curated_158","Curated_169","TopRated","TopGrossing","MostEngaging","Popular","PersonalRecommendation","PopularInCountry"],getExploreSortContent:{url:"".concat(u,"/explore-api/v1/get-sort-content"),withCredentials:!0},discoverPageExperimentLayer:"GameDiscovery.GameSorts"};function d(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function v(r){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach(function(e){var t,n;t=r,e=a[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(a,e))})}return r}function h(e,r){var a=e||T.gamesDefaultSortAlgorithm,e={gameSortsContext:a};return y&&clearTimeout(y),c.httpService.get(T.getGameSortsWithDetaultSorts,e).then(function(e){var l,u,c,d,f,t,n=e.data;return null!=n&&n.sorts&&r&&(l=a,e=(t=n).sorts,u=t.timeFilters,c=t.pageContext,d=(new Date).getTime(),t=x.localStorageService.getLocalStorage(s)||{},f={},e.forEach(function(e,t){var n=e.token,r=e.displayName,a=e.name,o=e.gameSetTargetId,i=e.tokenExpiryInSeconds,s=e.contextCountryRegionId,e=e.timeOptionsAvailable;f[a]={name:a,displayName:r,token:n,gameSetTargetId:o,dateStoredTime:d,tokenExpiryInSeconds:i,gameSortContext:l,sortPosition:t,pageContext:c,contextCountryRegionId:s,timeOptionsAvailable:e,timeFilters:u}}),t=Object.assign(t,f),x.localStorageService.setLocalStorage(s,t),t=0<(null==(t=n.sorts)?void 0:t.length)?1e3*t[0].tokenExpiryInSeconds:36e5,y=setTimeout(function(){h()},t)),n})}var y=null,b=h,N=function(e){return c.httpService.get(T.getGamesList,e).then(function(e){return e.data})},C=function(e){return p.exploreApiSupportSortNames.includes(e.sortId)&&c.httpService.get(p.getExploreSortContent,e).then(function(e){return e.data}).catch(function(){}),Promise.resolve(null)},R=function(e,t){var n=v({},t);return n.hasMoreRows=e.hasMoreRows,e.hasMoreRows&&(e.nextPageExclusiveStartId?n.exclusiveStartId=e.nextPageExclusiveStartId:(e=t.startRows,t=t.maxRows,n.startRows=e+t)),n},O=function(e){var t=null;return e.forEach(function(e){"PastWeek"===e.name&&(t=e.token)}),t},E=RobloxThumbnails;function w(e){var t=e.game,n=e.isOneLine,e=e.handlePlayerInteraction,n=re()("game-card-name game-name-title",{"game-name-oneline":n});return ne().createElement(ne().Fragment,null,e?ne().createElement("div",{"data-testid":"game-tile-game-name",className:n,title:t.name,onClick:e,role:"button","aria-hidden":!0},t.name):ne().createElement("div",{"data-testid":"game-tile-game-name",className:n,title:t.name},t.name))}w.defaultProps={isOneLine:!1,handlePlayerInteraction:null},w.propTypes={game:i().shape({name:i().string}).isRequired,isOneLine:i().bool,handlePlayerInteraction:i().func};var D=w;function S(e){var t=e.game,n=t.totalUpVotes,e=t.totalDownVotes,t=t.playerCount,n=function(e,t){var n=0;if(!Number.isNaN(e)&&!Number.isNaN(t)){if(0===e){if(0===t)return null;n=0}else n=0===t?100:Math.floor(e/(e+t)*100);100<n&&(n=100)}return"".concat(n,"%")}(n,e),e=c.abbreviateNumber.getAbbreviatedValue(t);return ne().createElement("div",{"data-testid":"game-tile-card-info",className:"game-card-info"},ne().createElement("span",{className:"info-label icon-votes-gray"}),n?ne().createElement("span",{"data-testid":"game-tile-card-info-vote-label",className:"info-label vote-percentage-label"},n):ne().createElement("span",{"data-testid":"game-tile-card-info-no-vote",className:"info-label no-vote"}),ne().createElement("span",{className:"info-label icon-playing-counts-gray"}),ne().createElement("span",{className:"info-label playing-counts-label",title:t},e))}S.propTypes={game:i().shape({universeId:i().number,playerCount:i().number,totalUpVotes:i().number,totalDownVotes:i().number}).isRequired};var k=S,A="Label.SponsoredAd";function G(e){e=e.translate;return ne().createElement("div",{"data-testid":"game-tile-native-ad",className:"game-card-native-ad"},ne().createElement("span",{className:"font-footer native-ad-label"},e(A)))}G.propTypes={translate:i().func.isRequired};var L=G,j={notificationTypes:{gameFavoriteNotifications:"GameFavoriteNotifications",gameCloseNotifications:"GameCloseNotifications"},sortsNeedRealtimeUpdate:{myFavorite:"MyFavorite",myRecent:"MyRecent"},pageTypes:{home:"Home",gameDetail:"GameDetail"},maxNumOfGamesPerList:6,seeAllLinkLabel:"Action.SeeAll",NoGamesLabel:"Label.NoGames",seeAllClass:"see-all-button games-filter-changer btn-secondary-xs btn-more see-all-link-icon",deviceTypes:{computer:"Computer"}},M=function(e,t,n,r,a,o,i,s,l){var u=8<arguments.length&&void 0!==l&&l,l=e.placeId,e=e.nativeAdData,u={PageType:t,PlaceId:l,Position:n+1,IsLargeGameTile:u};t===j.pageTypes.gameDetail&&(u.RecommendationSourceId=s,u.RecommendationAlgorithm=2),e&&(u.NativeAdData=e),r&&(u.SortName=r),null!=a&&a.pageId&&(u.PageId=null==a?void 0:a.pageId),-1<o&&(u.SortPosition=o+1);u=c.urlService.getUrlWithQueries(x.entityUrl.game.getReferralPath(),u),i=i||(new Date).toISOString();return u="".concat(u,"&LocalTimestamp=").concat(i)},U=4,F="Label.ContextMenuTitle",H="Action.ViewDetails",q="Action.JoinGame",_={goToProfileInPlacesList:{name:"goToProfileInPlacesList",ctx:"click"},openModalFromGameTile:{name:"openModalFromGameTile",ctx:"click"},goToChatInPlacesList:{name:"goToChatInPlacesList",ctx:"click"},joinGameInPlacesList:{name:"joinGameInPlacesList",ctx:"click"},goToGameDetailInPlacesList:{name:"goToGameDetailInPlacesList",ctx:"click"},gamePlayIntentInPlacesList:{ctx:"placesListInHomePage"}};function z(e){var t=e.playerId,e=e.altName;return ne().createElement("div",{className:"avatar-card-link"},ne().createElement(E.Thumbnail2d,{type:E.ThumbnailTypes.avatarHeadshot,size:E.ThumbnailAvatarHeadshotSize.size48,targetId:t,imgClassName:"avatar-card-image",format:E.ThumbnailFormat.png,altName:e}))}z.defaultProps={altName:""},z.propTypes={playerId:i().number.isRequired,altName:i().string};var V=z;function B(e){var t=e.friendsData,n=e.handlePlayerInteraction,o=e.friendsInGame,i=U,e=o.length,s=i<e?"+".concat(o.length-i+1):0,l={};return t.forEach(function(e){l[e.id]=e}),ne().createElement("ul",{"data-testid":"game-players-players",className:"cursor-pointer game-card-avatar-slots",onClick:n,"aria-hidden":"true"},o.length&&o.map(function(e,t){if(t+1<i&&l[e]){var n=e+t,r=l[e],a=r.id,r=r.nameForDisplay;return ne().createElement("li",{key:n,className:"avatar avatar-headshot avatar-headshot-xs",title:r},ne().createElement(V,{playerId:a,altName:r}))}if(t+1===i&&l[e]&&o.length===i){a=e+t,r=l[e],e=r.id,r=r.nameForDisplay;return ne().createElement("li",{key:a,className:"avatar avatar-headshot avatar-headshot-xs",title:r},ne().createElement(V,{playerId:e,altName:r}))}return t+1===i&&o.length>i?ne().createElement("li",{className:"avatar avatar-headshot avatar-headshot-xs offset-card"},ne().createElement("span",{className:"xsmall avatar-offset-label"},s)):null}))}B.propTypes={friendsData:i().arrayOf(i().shape({presense:i().shape({userPresenceType:i().number}),id:i().number,nameForDisplay:i().string})).isRequired,handlePlayerInteraction:i().func.isRequired,friendsInGame:i().arrayOf(i().number).isRequired};var W=B;function Y(e){var t=e.game,n=e.translate,r=t.universeId,a=t.name,e=t.referralUrl,t=t.isPlayable,r=ne().createElement(E.Thumbnail2d,{type:E.ThumbnailTypes.gameIcon,size:E.DefaultThumbnailSize,targetId:r,imgClassName:"game-card-thumb",format:E.ThumbnailFormat.jpeg});return ne().createElement("div",{className:"border-bottom player-interaction-container"},ne().createElement("span",{className:"cursor-pointer game-icon"},ne().createElement(P.Link,{url:e,className:"game-card-link"},r)),ne().createElement("span",{className:"game-info-container"},ne().createElement(P.Link,{url:e,className:"game-name"},a),!t&&ne().createElement(P.Link,{url:e,className:"btn-control-sm game-link"},n(H))))}Y.propTypes={game:i().shape({universeId:i().number,placeId:i().number,name:i().string,playerCount:i().number,isShowSponsoredLabel:i().bool,nativeAdData:i().string,imageUrl:i().string,referralUrl:i().string,isPlayable:i().bool}).isRequired,translate:i().func.isRequired};var Q=Y;function $(e){var t=e.playerData,o=e.dismissModal,n=e.isPlayable,r=e.translate,e=t.presence,i=e.rootPlaceId,s=e.placeId,l=e.gameId,u=t.id,t=t.nameForDisplay;return ne().createElement("div",{className:"border-bottom player-info"},ne().createElement("span",{className:"player-name"},t),ne().createElement(P.Button,{className:"cursor-pointer btn-primary-sm player-action",onClick:function(e){var t={rootPlaceId:i,placeId:s},n=x.playGameService.buildPlayGameProperties(i,s,l,u),r=_.joinGameInPlacesList,a=_.gamePlayIntentInPlacesList,a={eventName:r.name,ctx:r.ctx,properties:t,gamePlayIntentEventCtx:a.ctx};x.playGameService.launchGame(n,a),o(e)},isDisabled:!n},r(q)))}$.propTypes={playerData:i().shape({presence:i().shape({rootPlaceId:i().number,placeId:i().number,gameId:i().string}),id:i().number,nameForDisplay:i().string}).isRequired,dismissModal:i().func.isRequired,isPlayable:i().bool.isRequired,translate:i().func.isRequired};var J=$;function K(e){var t=e.friendsData,n=e.friendsInGame,a=e.dismissModal,o=e.isPlayable,i=e.translate,s={};return t.forEach(function(e){s[e.id]=e}),ne().createElement("div",{className:"interaction-container"},ne().createElement("ul",{className:"interaction-list"},n.map(function(e,t){var n=e+t,r=s[e],t=r.id,e=r.nameForDisplay;return ne().createElement("li",{key:n,className:"interaction-item","aria-hidden":"true"},ne().createElement("span",{className:"avatar avatar-headshot avatar-headshot-sm player-avatar"},ne().createElement(V,{playerId:t,altName:e})),ne().createElement(J,{playerData:r,dismissModal:a,isPlayable:o,translate:i}))})))}K.propTypes={friendsData:i().arrayOf(i().shape({presense:i().shape({rootPlaceId:i().number,placeId:i().number,gameId:i().string}),id:i().number,nameForDisplay:i().string})).isRequired,friendsInGame:i().arrayOf(i().number).isRequired,dismissModal:i().func.isRequired,isPlayable:i().bool.isRequired,translate:i().func.isRequired};var Z=K;function X(e){var t=e.friendsData,n=e.friendsInGame,r=e.game,a=e.dismissModal,o=e.translate,e=o(F);return ne().createElement("div",{"data-testid":"game-players-player-interaction-modal"},ne().createElement(P.Modal.Header,{title:e,onClose:a}),ne().createElement(Q,{game:r,translate:o}),ne().createElement(Z,{friendsData:t,friendsInGame:n,dismissModal:a,isPlayable:r.isPlayable,translate:o}))}function ee(e,t,n){return void 0===n&&(n={}),c.urlService.getUrlWithQueries(x.entityUrl.game.getRelativePath(e)+"/"+c.seoName.formatSeoName(t),n)}function ae(e){var t=(n=window.getComputedStyle(e)).marginLeft,n=n.marginRight;return e.getBoundingClientRect().width+(parseInt(t,10)||0)+(parseInt(n,10)||0)}function oe(e){var e=(t=e.getBoundingClientRect()).top,t=t.height;return 0<e+t/2&&window.innerHeight>e+t/2}function ie(){return document.referrer}X.propTypes={friendsData:i().arrayOf(i().shape({presense:i().shape({rootPlaceId:i().number,placeId:i().number,gameId:i().string}),id:i().number,nameForDisplay:i().string})).isRequired,friendsInGame:i().arrayOf(i().number).isRequired,game:i().shape({universeId:i().number,placeId:i().number,name:i().string,playerCount:i().number,isShowSponsoredLabel:i().bool,nativeAdData:i().string,imageUrl:i().string,referralUrl:i().string,isPlayable:i().bool}).isRequired,dismissModal:i().func.isRequired,translate:i().func.isRequired};var se=X,le={offline:{status:0,className:""},online:{status:1,className:"icon-online"},ingame:{status:2,className:"icon-game"},instudio:{status:3,className:"icon-studio"}},ue=function(e,a){var o=[];return null!=e&&e.length&&e.forEach(function(e){var t,n,r;null!=e&&e.presence&&(n=(r=e.presence).universeId,r=r.userId,n===a&&(null==e||null===(t=e.presence)||void 0===t?void 0:t.userPresenceType)===le.ingame.status&&o.push(r))}),o},ce=function(e,a,o,i){if(null==e||!e.length||null==a||!a.length)return null;var s=!1;return e.forEach(function(t){var n=t.userId,e=t.universeId,r=t.userPresenceType;e===i&&r===le.ingame.status&&o.indexOf(n)<0?(s=!0,a.forEach(function(e){n===e.id&&(e.presence=t)})):r!==le.ingame.status&&-1<o.indexOf(n)&&(s=!0,a.forEach(function(e){n===e.id&&(e.presence=t)}))}),s?a:null},de=ee;function fe(){return(fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(Pt=ne().forwardRef(function(e,t){var n=e.game,r=e.pageType,a=e.index,o=e.sortName,i=e.pageContext,s=e.sortPosition,l=e.dateTime,u=e.friendsData,c=e.gameDetailPlaceId,d=e.isHidden,f=e.buildEventProperties,m=n.universeId,i=M(n,r,a,o,i,s,l,c);n.referralUrl=i;var s=me((0,te.useState)(u),2),l=s[0],p=s[1],c=me((0,te.useState)([]),2),v=c[0],g=c[1],s=me((0,te.useState)(ue(u,m)),2),h=s[0],y=s[1],c=me((0,te.useState)(!1),2),s=c[0],b=c[1],w=(0,te.useRef)(),c=function(){b(!0),w.current=!0},f=f?de(n.placeId,n.name,f(n,a)):i,a=function(){null!=v&&v.length&&(y(ue(v,m)),p(v),g([])),b(!1),w.current=!1},S=(0,te.useCallback)(function(e){null==e||!e.detail||null!=(e=ce(e.detail,u,h,m))&&e.length&&(w.current?g(e):(y(ue(e,m)),p(e)))},[u,h,m]),i=ne().createElement("div",{className:"game-card-thumb-container"},ne().createElement(E.Thumbnail2d,{type:E.ThumbnailTypes.gameIcon,size:E.DefaultThumbnailSize,targetId:n.universeId,containerClass:"game-card-thumb",format:E.ThumbnailFormat.jpeg,altName:n.name}));return(0,te.useEffect)(function(){return null!=u&&u.length&&document.addEventListener("Roblox.Presence.Update",S),function(){null!=u&&u.length&&document.removeEventListener("Roblox.Presence.Update",S)}},[u,h,S,m]),ne().createElement("div",{className:"game-card-container",ref:t},0<h.length&&ne().createElement(ne().Fragment,null,ne().createElement(P.Link,{tabIndex:d?-1:0,"aria-hidden":d,url:f,className:"game-card-link",id:n.universeId},i),ne().createElement(D,{game:n,isOneLine:!0,handlePlayerInteraction:c}),ne().createElement(W,{handlePlayerInteraction:c,friendsData:l,friendsInGame:h}),ne().createElement(P.Modal,{show:s,onHide:a,size:"lg"},ne().createElement(se,fe({friendsData:l,friendsInGame:h,game:n,dismissModal:a},e)))),0===h.length&&ne().createElement(P.Link,{tabIndex:d?-1:0,"aria-hidden":d,url:f,className:"game-card-link",id:n.universeId},i,ne().createElement(D,{game:n}),n.isShowSponsoredLabel&&ne().createElement(L,e),!n.isShowSponsoredLabel&&ne().createElement(k,{game:n})))})).defaultProps={sortName:null,sortPosition:-1,pageContext:{pageId:null},dateTime:null,friendsData:[],buildEventProperties:void 0,gameDetailPlaceId:null,isHidden:!1},Pt.propTypes={game:i().shape({universeId:i().number,placeId:i().number,name:i().string,playerCount:i().number,isShowSponsoredLabel:i().bool,nativeAdData:i().string,referralUrl:i().string}).isRequired,buildEventProperties:i().func,pageType:i().string.isRequired,isHidden:i().bool,index:i().number.isRequired,sortName:i().string,pageContext:i().shape({pageId:i().string}),sortPosition:i().number,dateTime:i().string,friendsData:i().arrayOf(i().shape({presense:i().shape({userPresenceType:i().number}),id:i().number,nameForDisplay:i().string})),gameDetailPlaceId:i().number},Pt.displayName="GameTile";var ve=Pt,ge={maxTilesInGameImpressionsEvent:25,numberOfInGameIcons:3,numberOfInGameNames:1,numberOfGameTilesPerLoad:60,numberOfGamePassesPerLoad:50,keyBoardEventCode:{enter:"Enter"}},he=.1,ye=ge.keyBoardEventCode;function be(e){var t=e.scrollClassNames,n=e.scrollIconClassName,r=e.scroll;e.isDisabled;return ne().createElement("div",{"data-testid":"game-carousel-scroll-bar",className:t,onClick:r,onKeyDown:function(e){e.code===ye.enter&&(e.stopPropagation(),e.preventDefault(),r(e))},role:"button",tabIndex:0},ne().createElement("div",{className:"arrow"},ne().createElement("span",{className:n})),ne().createElement("div",{className:"spacer"}))}function we(e){return(null==e?void 0:e.clientWidth)+14}function Se(e,t){return Number.isNaN(t)?0:Math.floor(e/t)*t}function Ee(n,r){var a;return void 0===r&&(r=300),[function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];clearTimeout(a),a=setTimeout(function(){n.apply(void 0,e)},r)},function(){clearTimeout(a)}]}be.propTypes={scrollClassNames:i().string.isRequired,scrollIconClassName:i().string.isRequired,scroll:i().func.isRequired,isDisabled:i().bool.isRequired};var Ie=be,Pe="scroller prev",xe="scroller next",Te="icon-games-carousel-left",Ne="icon-games-carousel-right",Ce={left:"0px"},Re={gameCarousel:"Games",gameSearch:"GameSearch",gameSeeAll:"GamesSeeAll"},Oe=70,De=60,ke={featureGameTile:"featured-tile"},Ae=m.DeviceMeta&&(0,m.DeviceMeta)().isDesktop,Ge=16,Le=32,je=function(e,t,n){return e+Se(t,n)},Me=function(e,t,n){return e-Se(t,n)},Ue=function(e){return null==e?void 0:e.clientHeight},Fe=function(e,t){return Number.isNaN(t)?0:Math.floor(e/t)},He=function(e){return 0===e},qe=function(e,t,n){return e<=Math.abs(n)+t},_e=we;(a=function(e){var t=e.gameDescription,n=e.placeId;return ne().createElement("div",{"data-testid":"game-tile-hover-game-tile-contents",className:"game-card-contents"},t&&ne().createElement("p",{className:"game-description font-caption-header"},t),ne().createElement(P.Button,{width:P.Button.widths.full,variant:P.Button.variants.growth,size:P.Button.sizes.extraSmall,onClick:function(){x.playGameService.launchGame(x.playGameService.buildPlayGameProperties(void 0,n),{eventName:"playGameClicked",ctx:"click",properties:{placeId:n},gamePlayIntentEventCtx:"PlayButton"})}},ne().createElement("span",{className:"icon-common-play"})))}).defaultProps={gameDescription:null},a.propTypes={gameDescription:i().string,placeId:i().number.isRequired};var ze,Ve=a,o={common:["CommonUI.Controls"],feature:"Feature.GameDetails"};(u={})[u.Image=1]="Image",u[u.YouTubeVideo=33]="YouTubeVideo",u[u.Unknown=0]="Unknown",(Pt=ze=ze||{}).Image="Image",Pt.YouTubeVideo="YouTubeVideo",Pt.Place="Place",Pt[Pt.Unknown=0]="Unknown";var Be,a=xa(640),We=xa.n(a),Ye="game-details-play-button-container",Qe={back:"Action.Back",next:"Action.Next"},u={delay:6e3},$e=function(e){return{width:768,height:432,videoId:e,host:"https://www.youtube-nocookie.com",playerVars:{cc_load_policy:1,modestbranding:1}}},Je=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},Ke=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};(Pt=Be=Be||{})[Pt.Unstarted=-1]="Unstarted",Pt[Pt.Ended=0]="Ended",Pt[Pt.Playing=1]="Playing",Pt[Pt.Paused=2]="Paused",Pt[Pt.Buffering=3]="Buffering",Pt[Pt.Cued=5]="Cued";var Ze=(0,te.forwardRef)(function(e,t){function n(e){switch(e.data){case Be.Playing:case Be.Buffering:i&&i(e);break;case Be.Paused:s&&s(e);break;case Be.Ended:l&&l(e)}}function r(e){var t;null!==(t=c.current)&&void 0!==t&&t.mute(),u&&u(e)}var a=e.id,o=e.className,i=e.onPlay,s=e.onPaused,l=e.onEnd,u=e.onReady,c=(0,te.useRef)(void 0);return(0,te.useImperativeHandle)(t,function(){return{pause:function(){var e;null!==(e=c.current)&&void 0!==e&&e.pauseVideo()},play:function(e){var t;void 0!==e&&null!==(t=c.current)&&void 0!==t&&t.seekTo(e,!0),null!==(e=c.current)&&void 0!==e&&e.playVideo()},getCurrentTime:function(){return Je(void 0,void 0,Promise,function(){var t;return Ke(this,function(e){switch(e.label){case 0:return[4,null===(t=c.current)||void 0===t?void 0:t.getCurrentTime()];case 1:return[2,e.sent()||-1]}})})},getDuration:function(){return Je(void 0,void 0,Promise,function(){var t;return Ke(this,function(e){switch(e.label){case 0:return[4,null===(t=c.current)||void 0===t?void 0:t.getDuration()];case 1:return[2,e.sent()||-1]}})})}}}),(0,te.useEffect)(function(){return c.current=We()(a,$e(a)),c.current.on("stateChange",n),c.current.on("ready",r),function(){var e;null!==(e=c.current)&&void 0!==e&&e.destroy()}},[]),ne().createElement("div",{className:o},ne().createElement("div",{id:a}))}),Xe=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},et=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},tt=(0,te.forwardRef)(function(e,t){function u(){y.current&&Object.values(y.current).forEach(function(e){e.pause()})}function n(l){return Xe(void 0,void 0,void 0,function(){var t,n,r,a,o,i,s;return et(this,function(e){switch(e.label){case 0:return(null!=l&&l.preventDefault(),u(),t=(h.current+1)%c.length,d(t),h.current=t,b(),c[t].type!==ze.YouTubeVideo)?[3,3]:(n=null===(s=y.current)||void 0===s?void 0:s[t],s=(a=Math).ceil,[4,n.getDuration()]);case 1:return r=s.apply(a,[e.sent()]),i=(o=Math).ceil,[4,n.getCurrentTime()];case 2:((o=i.apply(o,[e.sent()]))<=0||r<=o)&&h.current===t&&n.play(0),e.label=3;case 3:return[2]}})})}function r(e){null!=e&&e.preventDefault(),u(),e=h.current-1<0?c.length-1:h.current-1,d(e),h.current=e,b()}function a(){g.current&&clearTimeout(g.current)}var c=e.items,o=e.delay,i=e.translate,s=(0,te.useState)(0),l=s[0],d=s[1],e=(0,te.useState)(!1),s=e[0],f=e[1],m=(0,te.useRef)(!1),e=(0,te.useState)(!1),p=e[0],v=e[1],g=(0,te.useRef)(void 0),h=(0,te.useRef)(l),y=(0,te.useRef)({}),b=function(){a(),p||m.current||(g.current=setTimeout(function(){n()},o))};(0,te.useEffect)(function(){var e;return b(),null!==(e=document.getElementById(Ye))&&void 0!==e&&e.addEventListener("click",u),function(){var e;a(),null!==(e=document.getElementById(Ye))&&void 0!==e&&e.removeEventListener("click",u)}},[]),(0,te.useImperativeHandle)(t,function(){return{start:b,stop:a,next:n,back:r}});t=function(e){e.stopPropagation()};return ne().createElement("div",{"data-testid":"carousel",onFocus:function(){f(!0),m.current=!0,a()},onBlur:function(){f(!1),m.current=!1,b()},onMouseEnter:function(){f(!0),m.current=!0,a()},onMouseLeave:function(){f(!1),m.current=!1,b()}},1<c.length&&ne().createElement(ne().Fragment,null,ne().createElement(P.Button,{className:re()("carousel-controls","carousel-controls-left",{"carousel-controls-visible":s}),onClick:r,onBlur:t,"aria-label":i(Qe.back)},ne().createElement("span",{className:"icon-carousel-left"})),ne().createElement(P.Button,{className:re()("carousel-controls","carousel-controls-right",{"carousel-controls-visible":s}),onClick:n,onBlur:t,"aria-label":i(Qe.next)},ne().createElement("span",{className:"icon-carousel-right"}))),c.map(function(e,t){switch(e.type){case ze.Image:case ze.Place:return ne().createElement(E.Thumbnail2d,{key:e.assetId,type:e.type===ze.Image?E.ThumbnailTypes.assetThumbnail:E.ThumbnailTypes.gameThumbnail,size:E.ThumbnailUniverseThumbnailSize.width768,targetId:e.assetId,altName:e.altText,containerClass:re()("carousel-item",{"carousel-item-active":t===l,"carousel-item-active-out":t===(l-1<0?c.length-1:l-1)||t===(l+1)%c.length})});case ze.YouTubeVideo:return ne().createElement(Ze,{ref:function(e){e&&(y.current[t]=e)},id:e.videoHash,key:e.videoHash,className:re()("carousel-item","carousel-video",{"carousel-item-active":t===l,"carousel-item-active-out":t===(l-1<0?c.length-1:l-1)||t===(l+1)%c.length}),onPlay:function(){a(),v(!0)},onPaused:function(){b(),v(!1)},onEnd:function(){n(),v(!1)},onReady:function(){var e;0===t&&h.current===t&&null!==(e=y.current)&&void 0!==e&&e[t].play(0)}});default:return null}}))}),nt=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},rt=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},at=x.dataStores.gamesDataStore,ot={},it=function(n){return nt(void 0,void 0,Promise,function(){var t;return rt(this,function(e){switch(e.label){case 0:return ot[n]?[2,ot[n]]:[4,at.getUniverseMedia(n)];case 1:return t=e.sent().data.data,t=(void 0===t?[]:t).filter(function(e){return e.approved}).map(function(e){switch(e.assetType){case ze.Image:return{type:e.assetType,assetId:e.imageId,altText:e.altText};case ze.YouTubeVideo:return{type:e.assetType,videoHash:e.videoHash};default:return{type:ze.Unknown,assetId:0}}}).filter(function(e){return e.type!==ze.Unknown}),[2,ot[n]=t]}})})},st=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},lt=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},ut=(0,t.withTranslations)(function(e){var t=e.translate,n=e.placeId,r=e.universeId,a=e.delay,o=(0,te.useState)(void 0),e=o[0],i=o[1];return(0,te.useEffect)(function(){st(void 0,void 0,void 0,function(){var t;return lt(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,it(r)];case 1:return t=e.sent(),i(t),[3,3];case 2:return e.sent(),i([]),[3,3];case 3:return[2]}})})},[r]),void 0===e?ne().createElement("div",{className:"shimmer","data-testid":"loading"}):0===e.length?ne().createElement(tt,{translate:t,delay:a,items:[{type:ze.Place,assetId:parseInt(n,10)}]}):ne().createElement(tt,{translate:t,delay:a,items:e})},o),ct=u.delay;(a=ne().forwardRef(function(e,t){var n=e.game,r=e.isFocused,a=e.pageType,o=e.index,i=e.sortName,s=e.pageContext,l=e.sortPosition,u=e.dateTime,c=e.translate,d=e.buildEventProperties,f=n.placeId,m=n.universeId,p=n.gameDescription,u=M(n,a,o,i,s,l,u,f,!0);n.referralUrl=u;u=d?de(n.placeId,n.name,d(n,o)):u;return ne().createElement("div",{className:"featured-game-container game-card-container",ref:t},ne().createElement(P.Link,{url:u,className:"game-card-link"},r&&ne().createElement("div",{className:"thumb-container"},ne().createElement(ut,{placeId:f,universeId:m,translate:c,delay:.75*ct}),ne().createElement("div",{className:"thumb-mask"})),ne().createElement("div",{className:"featured-game-icon-container"},ne().createElement(E.Thumbnail2d,{type:E.ThumbnailTypes.gameIcon,size:E.ThumbnailGameIconSize.size512,targetId:m,containerClass:"brief-game-icon",format:E.ThumbnailFormat.jpeg,altName:n.name})),ne().createElement("div",{className:"info-container"},ne().createElement(D,{game:n}),n.isShowSponsoredLabel&&ne().createElement(L,e),!n.isShowSponsoredLabel&&ne().createElement(k,{game:n}))),ne().createElement(Ve,{placeId:f,gameDescription:p}))})).defaultProps={isFocused:!1,sortName:null,sortPosition:-1,pageContext:{pageId:null},dateTime:null,buildEventProperties:void 0},a.propTypes={game:i().shape({universeId:i().number,placeId:i().number,name:i().string,gameDescription:i().string,playerCount:i().number,isShowSponsoredLabel:i().bool,nativeAdData:i().string,referralUrl:i().string}).isRequired,isFocused:i().bool,pageType:i().string.isRequired,index:i().number.isRequired,sortName:i().string,pageContext:i().shape({pageId:i().string}),sortPosition:i().number,dateTime:i().string,translate:i().func.isRequired,buildEventProperties:i().func},a.displayName="HoverGameTile";var dt=a;function ft(){return(ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vt(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function gt(e){var t=e.game,n=e.gameTileRef,r=e.cursor,a=e.index,o=e.numGamesFitted,i=vt(e,["game","gameTileRef","cursor","index","numGamesFitted"]),s=a===r,l=a===r+o-1,u=r<=a&&a<=r+o-1,e=mt((0,te.useState)(!1),2),r=e[0],c=e[1],o=mt(Ee(function(){c(!1)},100),2),e=o[0],d=o[1],o=mt(Ee(function(){u&&c(!0)},100),2),f=o[0],m=o[1];return ne().createElement("li",{className:re()("list-item hover-game-tile",{"first-tile":s},{"last-tile":l},{focused:r}),onMouseOver:f,onMouseLeave:function(){m(),c(!1)},onFocus:function(){d(),f()},onBlur:e,id:null==t?void 0:t.universeId},(null==t?void 0:t.universeId)&&ne().createElement(dt,ft({game:t,isFocused:r,pageType:Re.gameCarousel,ref:n,index:a},i)))}function ht(e,n){return e.filter(function(e){var t;return(null===(t=e.presence)||void 0===t?void 0:t.universeId)===n&&(null===(e=e.presence)||void 0===e?void 0:e.userPresenceType)===m.Presence.PresenceTypes.InGame})}function yt(e){return e.charAt(0).toUpperCase()+e.slice(1)}function bt(n){return Object.keys(n).reduce(function(e,t){return"object"==typeof n[t]&&n[t]&&(e[t]=JSON.stringify(n[t])),"number"==typeof n[t]&&(e[t]=n[t]),"string"==typeof n[t]&&(e[t]=encodeURIComponent(n[t])),"boolean"==typeof n[t]&&(e[t]=n[t]?1:0),e},{})}function wt(e){return(e=c.urlService.composeQueryString(e))?"?"+e:""}gt.defaultProps={buildEventProperties:void 0},gt.propTypes={game:i().shape({universeId:i().number}).isRequired,gameTileRef:i().shape({current:i().instanceOf(Element)}).isRequired,cursor:i().number.isRequired,index:i().number.isRequired,numGamesFitted:i().number.isRequired,sortApiParams:i().shape({hasMoreRows:i().bool}).isRequired,pageContext:i().shape({pageId:i().string}).isRequired,sortPosition:i().number.isRequired,sortName:i().string.isRequired,translate:i().func.isRequired,buildEventProperties:i().func};var St,Et=gt,It=function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},Pt=(new m.Intl).getDateTimeFormatter(),o=c.urlService.parseQueryString,u=c.abbreviateNumber.getAbbreviatedValue,a=c.numberFormat.getNumberFormat,xt={capitalize:yt,humanizeCamelCase:function(e){var t=e.split(/([A-Z][a-z]*)/g);return 1===t.length?e:yt(t.filter(function(e){return 0!==e.length}).join(" "))},parseEventParams:bt,getInGameFriends:ht,getVotePercentage:function(e,t){var n=0;if(!Number.isNaN(e)&&!Number.isNaN(t)){if(0===e&&0===t)return;n=0===e&&0!==t?0:0!==e&&0===t||100<(n=Math.floor(e/(e+t)*100))?100:n}return n+"%"},getGearIconName:function(e){return{PowerUps:"PowerUp",Music:"Musical",PersonalTransport:"Transport"}[e]||e},getNumberFormat:a,getAbbreviatedValue:u,dateTimeFormatter:Pt,parseQueryString:o,composeQueryString:wt,calculateImpressedIndexes:function(e,n){if(void 0===e)return Array.from(new Array(n[1]-n[0]+1),function(e,t){return t+n[0]});var r=n[0]<e[0]?[n[0],e[0]]:void 0,a=n[1]>e[1]?[e[1],n[1]]:void 0,t=r?new Array(r[1]-r[0]).fill(0).map(function(e,t){return t+r[0]}):[],e=a?new Array(a[1]-a[0]).fill(0).map(function(e,t){return t+a[0]+1}):[];return It(It([],t),e)},splitArray:function(n,r){if(0===n.length||0===r)return[n];var e=Math.ceil(n.length/r);return new Array(e).fill(0).map(function(e,t){return n.slice(t*r,(t+1)*r)})}},Tt="robloxAttributionIds";function Nt(e){var t=window,n=t[Tt];return n||(n={},t[Tt]=n),(t=n[e])||(t=c.uuidService.generateRandomUuid(),n[e]=t),t}(St=St||{}).GameDetailReferral="gameDetailReferral";var Ct,Rt,Ot,Dt,kt=function(){return(kt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},At=function(e,t){var n={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},Gt=(Pt=x.eventStreamService.eventTypes).pageLoad,Lt=Pt.formInteraction;function jt(e,t,a){function n(){var t,e=[],n=!!(r=o.current)&&oe(r),r=function(e,t,n){if(n&&e){t=t?Math.abs(t.offsetLeft):e.scrollLeft,e=e.clientWidth,n=ae(n);return[Math.round(t/n),Math.round((t+e)/n)-1]}}(o.current,null==i?void 0:i.current,s.current);n&&r&&(e=xt.calculateImpressedIndexes(u.current,r)),0!==e.length&&l.current&&(t=l.current,0!==(n=e.filter(function(e){return e<t.length})).length&&(r=n,void 0===u.current?u.current=[r[0],r[r.length-1]]:(e=(u.current[0]<r[0]?u.current:r)[0],r=u.current[1]>r[r.length-1]?u.current[1]:r[r.length-1],u.current=[e,r]),r=Ft.gameImpressions(Ht(((r={})[Ct.RootPlaceIds]=n.map(function(e){return t[e].placeId}),r[Ct.UniverseIds]=n.map(function(e){return t[e].universeId}),r[Ct.AdsPositions]=n.map(function(e){return t[e].isSponsored?1:0}),r[Ct.AbsPositions]=n,r),a)),x.eventStreamService.sendEvent.apply(x.eventStreamService,r)))}function r(){d(),window.removeEventListener("scroll",c),window.removeEventListener("resize",c)}var o=e.carouselRef,i=e.carouselScrollRef,s=e.tileRef,l=(0,te.useRef)(t),u=(0,te.useRef)(void 0),c=(e=Ee(function(){n()}))[0],d=e[1];return(0,te.useEffect)(function(){return window.addEventListener("scroll",c),window.addEventListener("resize",c),r},[]),(0,te.useEffect)(function(){var e=o.current;return null!=e&&e.addEventListener("scroll",c),function(){null!=e&&e.removeEventListener("scroll",c)}},[o,c]),(0,te.useEffect)(function(){l.current=t,n()},[t]),c}function Mt(e){e instanceof SyntaxError&&window.sessionStorage.removeItem(_t)}function Ut(n,r){void 0===r&&(r=!1);var e=(0,te.useState)(Vt([n])[n]),t=e[0],a=e[1];return(0,te.useEffect)(function(){var e,t;r&&(t=c.uuidService.generateRandomUuid(),zt(((e={})[n]=t,e)),a(t))},[n,r]),t}(o=Ct=Ct||{}).AbsPositions="absPositions",o.AdsPositions="adsPositions",o.Algorithm="algorithm",o.AttributionId="attributionId",o.HttpReferrer="httpReferrer",o.EmphasisFlag="emphasisFlag",o.GameSetTargetId="gameSetTargetId",o.GameSetTypeId="gameSetTypeId",o.IsAd="isAd",o.NativeAdData="nativeAdData",o.NumberOfLoadedTiles="numberOfLoadedTiles",o.Page="page",o.PlaceId="placeId",o.Position="position",o.RootPlaceIds="rootPlaceIds",o.SortId="sortId",o.SortPos="sortPos",o.SuggestionKwd="suggestionKwd",o.SuggestionReplacedKwd="suggestionReplacedKwd",o.SuggestionCorrectedKwd="suggestionCorrectedKwd",o.SuggestionAlgorithm="suggestionAlgorithm",o.Topics="topics",o.TreatmentType="treatmentType",o.UniverseId="universeId",o.UniverseIds="universeIds",o.FriendId="friendId",(Pt=Rt=Rt||{}).GameImpressions="gameImpressions",Pt.GameDetailReferral="gameDetailReferral",Pt.SortDetailReferral="sortDetailReferral",Pt.GenreExplorerRender="genreExplorerRender",(o=Ot=Ot||{}).SearchPage="searchPage",o.SortDetailPageDiscover="sortDetailPageDiscover",o.SortDetailPageHome="sortDetailPageHome",o.GameDetailPage="gameDetailPage",o.GamesPage="gamesPage",o.HomePage="homePage",o.PeopleListInHomePage="peopleListInHomePage",(Pt=Dt=Dt||{}).HomePageSessionInfo="homePageSessionInfo",Pt.GameSearchSessionInfo="gameSearchSessionInfo",Pt.DiscoverPageSessionInfo="discoverPageSessionInfo";var Ft=((o={})[Rt.GameImpressions]=function(e){e=At(e,[]);return[{name:Rt.GameImpressions,type:Rt.GameImpressions,context:Lt},bt(kt({},e))]},o[Rt.GameDetailReferral]=function(e){var t;return void 0===e&&(e={}),[{name:Rt.GameDetailReferral,type:Rt.GameDetailReferral,context:Gt},bt(kt(((t={})[Ct.AttributionId]=Nt(St.GameDetailReferral),t[Ct.HttpReferrer]=ie(),t),e))]},o[Rt.SortDetailReferral]=function(e){return void 0===e&&(e={}),[{name:Rt.SortDetailReferral,type:Rt.SortDetailReferral,context:Gt},bt(kt({},e))]},o[Rt.GenreExplorerRender]=function(e){return[{name:Rt.GenreExplorerRender,type:Rt.GenreExplorerRender,context:Gt},bt(kt({},e))]},o),Ht=function(){return(Ht=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},qt=function(){return(qt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},_t="eventTracker",zt=function(e){try{var t=JSON.parse(window.sessionStorage.getItem(_t)||"{}"),t=qt(qt({},t),e);return window.sessionStorage.setItem(_t,JSON.stringify(t)),!0}catch(e){return Mt(e),!1}},Vt=function(e){try{var n=JSON.parse(window.sessionStorage.getItem(_t)||"{}");return e.reduce(function(e,t){return e[t]=n[t],e},{})}catch(e){return Mt(e),{}}};function Bt(){return(Bt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Wt(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function Yt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Wt(Object(n),!0).forEach(function(e){Qt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Qt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kt(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function Zt(e){function a(e){D({left:"".concat(e,"px")})}function t(){var e,n,r,t;A.isPrevDisabled||((e=T)&&!Number.isNaN(e)||(e=_e(g.current),N(e)),t=je(I,w,T),P(t),a(t),H(t),(e=q-C)<=B&&(r=(t=B-Oe)<0?0:t,t=q,(n=$).forEach(function(e,t){q<t&&(n[t]={}),t<=q&&r<=t&&(n[t]=z[t])}),W(r),Q(t),J(n)),_(e))}function n(e,n){var r=e,a=(e=Y+Oe)>(null==n?void 0:n.length)?null==n?void 0:n.length:e;r.forEach(function(e,t){t<q&&(r[t]={}),q<=t&&t<a&&(r[t]=n[t])}),W(q),Q(a),J(r)}var r=e.gamesData,o=e.loadMore,i=e.name,s=e.sortApiParams,l=e.pageContext,u=e.sortPosition,c=e.sortStyle,d=e.sort,f=e.isInitializedLoading,m=Kt(e,["gamesData","loadMore","name","sortApiParams","pageContext","sortPosition","sortStyle","sort","isInitializedLoading"]),p=(0,te.useRef)(),v=(0,te.useRef)(),g=(0,te.useRef)(),h=(0,te.useRef)(),y=(0,te.useRef)(!1),b=(Re.gameCarousel,$t((0,te.useState)(null===(O=p.current)||void 0===O?void 0:O.clientWidth),2)),w=b[0],S=b[1],E=$t((0,te.useState)(null!==(k=v.current)&&void 0!==k&&k.offsetLeft?null===(M=v.current)||void 0===M?void 0:M.offsetLeft:0),2),I=E[0],P=E[1],x=$t((0,te.useState)(_e(g.current)),2),T=x[0],N=x[1],e=$t((0,te.useState)(Fe(w,T)),2),C=e[0],R=e[1],O=$t((0,te.useState)(Ce),2),b=O[0],D=O[1],k=$t((0,te.useState)({isPrevDisabled:!0,isNextDisabled:!1}),2),A=k[0],G=k[1],L=Pe,j=xe,M=Te,E=Ne,x=$t((0,te.useState)({prev:L,next:j}),2),e=x[0],U=x[1],F=(0,te.useCallback)(function(e,t){G({isPrevDisabled:e,isNextDisabled:t});e=re()(L,{disabled:e}),t=re()(j,{disabled:t});U({prev:e,next:t})},[L,j]),H=(0,te.useCallback)(function(e){var t,n=He(e),r=null===(t=v.current)||void 0===t?void 0:t.clientWidth,a=w;w||(a=null===(t=p.current)||void 0===t?void 0:t.clientWidth);e=qe(r,a,e);F(n,e)},[w,F]),O=$t((0,te.useState)(0),2),q=O[0],_=O[1],k=$t((0,te.useState)(r),2),z=k[0],V=k[1],x=$t((0,te.useState)(0),2),B=x[0],W=x[1],O=$t((0,te.useState)(20),2),Y=O[0],Q=O[1],k=$t((0,te.useState)(r.map(function(e,t){return B<=t&&t<=Y?e:{}})),2),$=k[0],J=k[1],K=(0,te.useCallback)(function(e){A.isNextDisabled||(o(),e||((e=T)&&!Number.isNaN(e)||(e=_e(g.current),N(e)),e=Me(I,w,e),P(e),a(e),H(e),e=q+C,Y<=q+2*C&&n($,z),_(e)))});(0,te.useEffect)(function(){var e,t=_e(g.current);Number.isNaN(t)||(N(function(){return t}),e=Fe(w,t),R(e))},[w]),(0,te.useEffect)(function(){function e(){var e;S(null===(e=p.current)||void 0===e?void 0:e.clientWidth)}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}},[]),(0,te.useEffect)(function(){var e;return f?(S(null===(e=p.current)||void 0===e?void 0:e.clientWidth),P(null===(e=v.current)||void 0===e?void 0:e.offsetLeft)):Y<=q+2*C&&n($,z),H(I),function(){}},[$]),(0,te.useEffect)(function(){var e,t,n;return null!=r&&r.length&&(V(r),$.length?(e=r.length,(t=$.length)<e&&(n=Array(e-t).fill({}),J(function(e){return e.concat(n)}))):(J(function(e){return e.concat(r)}),Q(r.length))),function(){}},[r]);var x=(0,te.useCallback)(function(){K(!0)},[K]),O=Ut(Dt.DiscoverPageSessionInfo),Z=(Qt(k={},Ct.SortPos,u),Qt(k,Ct.NumberOfLoadedTiles,($||[]).length),Qt(k,Ct.Page,Ot.GamesPage),Qt(k,Ct.GameSetTargetId,s.gameSetTargetId),Qt(k,Ct.GameSetTypeId,d.gameSetTypeId),Qt(k,Dt.DiscoverPageSessionInfo,O),k),X=jt({carouselRef:p,tileRef:h,carouselScrollRef:v},z,Z),ee=(0,te.useCallback)(function(e){y.current||(y.current=!0,e(),setTimeout(function(){y.current=!1,X()},200))},[X]);return ne().createElement("div",{"data-testid":"game-carousel-carousel-container",className:"clearfix horizontal-scroll-window",ref:p},ne().createElement("div",{className:"horizontally-scrollable",style:b,onScroll:x,ref:v},ne().createElement("ul",{className:"hlist games game-cards game-tile-list"},0<$.length&&$.map(function(e,o){function t(e){var t=e.placeId,n=e.isSponsored,r=e.universeId,a=e.nativeAdData;return Yt(Yt({},Z),{},(Qt(e={},Ct.Position,o),Qt(e,Ct.IsAd,n),Qt(e,Ct.PlaceId,t),Qt(e,Ct.UniverseId,r),Qt(e,Ct.NativeAdData,a),e))}var n="".concat(null==e?void 0:e.universeId).concat(o);return c===ke.featureGameTile?ne().createElement(Et,Bt({key:n,game:e,gameTileRef:g,ref:h,cursor:q,index:o,numGamesFitted:C,pageContext:l,sortName:i,sortPosition:u,buildEventProperties:t},m)):ne().createElement("li",{className:"list-item game-card game-tile",id:null==e?void 0:e.universeId,key:n,ref:h,title:null==e?void 0:e.name},(null==e?void 0:e.universeId)&&ne().createElement(ve,Bt({game:e,isHidden:!(q<=o&&o<=q+C-1),pageType:Re.gameCarousel,ref:g,index:o,sortName:i,pageContext:l,sortPosition:u,buildEventProperties:t},m)))}))),ne().createElement(Ie,Bt({scrollClassNames:e.prev,scrollIconClassName:M,isDisabled:A.isPrevDisabled,scroll:function(){return ee(t)}},m)),ne().createElement(Ie,Bt({scrollClassNames:e.next,scrollIconClassName:E,isDisabled:A.isNextDisabled,scroll:function(){return ee(K)}},m)))}Zt.propTypes={gamesData:i().arrayOf(i().shape({universeId:i().number})).isRequired,loadMore:i().func.isRequired,name:i().string.isRequired,sortApiParams:i().shape({hasMoreRows:i().bool,gameSetTargetId:i().oneOfType([i().number,i().any])}).isRequired,pageContext:i().shape({pageId:i().string}).isRequired,sortPosition:i().number.isRequired,sortStyle:i().string.isRequired,sort:i().shape({gameSetTypeId:i().number}).isRequired,isInitializedLoading:i().bool.isRequired,translate:i().func.isRequired};var Xt=Zt;(Pt=ne().forwardRef(function(e,t){var n=e.game,r=e.pageType,a=e.index,o=e.sortName,i=e.pageContext,s=e.sortPosition,l=e.dateTime,u=e.buildEventProperties,c=n.placeId,d=n.universeId,c=M(n,r,a,o,i,s,l,c,!0);n.referralUrl=c;c=u?de(n.placeId,n.name,u(n,a)):c;return ne().createElement("div",{className:"featured-game-container game-card-container",ref:t},ne().createElement(P.Link,{url:c,className:"game-card-link"},ne().createElement("div",{className:"thumb-container"},ne().createElement(E.Thumbnail2d,{type:E.ThumbnailTypes.universeThumbnail,size:E.ThumbnailGameThumbnailSize.width576,targetId:d,imgClassName:"thumb",format:E.ThumbnailFormat.jpeg,altName:n.name}),ne().createElement("div",{className:"thumb-mask"})),ne().createElement("div",{className:"featured-game-icon-container"},ne().createElement(E.Thumbnail2d,{type:E.ThumbnailTypes.gameIcon,size:E.DefaultThumbnailSize,targetId:d,containerClass:"brief-game-icon",format:E.ThumbnailFormat.jpeg,altName:n.name})),ne().createElement("div",{className:"info-container"},ne().createElement(D,{game:n}),n.isShowSponsoredLabel&&ne().createElement(L,e),!n.isShowSponsoredLabel&&ne().createElement(k,{game:n}))))})).defaultProps={sortName:null,sortPosition:-1,pageContext:{pageId:null},dateTime:null,buildEventProperties:void 0},Pt.propTypes={game:i().shape({universeId:i().number,placeId:i().number,name:i().string,gameDescription:i().string,playerCount:i().number,isShowSponsoredLabel:i().bool,nativeAdData:i().string,referralUrl:i().string}).isRequired,pageType:i().string.isRequired,index:i().number.isRequired,buildEventProperties:i().func,sortName:i().string,pageContext:i().shape({pageId:i().string}),sortPosition:i().number,dateTime:i().string},Pt.displayName="FeatureGameTile";var en=Pt;function tn(){return(tn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function nn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return rn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function an(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function on(e){var r=e.eventRef,t=e.gamesData,n=e.sort,a=e.isNumberRowsLimited,o=e.pageType,i=e.featureUniverseId,s=e.isDataFetching,l=e.sortPosition,u=e.pageContext,c=an(e,["eventRef","gamesData","sort","isNumberRowsLimited","pageType","featureUniverseId","isDataFetching","sortPosition","pageContext"]),d=(0,te.useRef)(),f=n.numberOfRows,m=n.name,e=nn((0,te.useState)({height:"auto"}),2),n=e[0],p=e[1];return(0,te.useEffect)(function(){var e;a&&d.current&&(e=Ue(d.current)+12,p({height:"".concat(e*f,"px")}))},[d,a,f]),ne().createElement("div",{"data-testid":"game-grid-grid-container",className:"multi-row clearfix game-grid-container",style:n},t&&t.map(function(e,t){var n="".concat(e.universeId).concat(t);return e.universeId===i?ne().createElement("li",{className:"featured-game-tile",key:n,title:null==e?void 0:e.name},ne().createElement(en,tn({game:e,pageType:o,index:t,sortName:m,sortPosition:l,pageContext:u},c,{ref:d}))):ne().createElement("li",{ref:r,className:"game-card game-tile",key:n,title:null==e?void 0:e.name},ne().createElement(ve,tn({game:e,pageType:o,index:t,sortName:m,sortPosition:l,pageContext:u},c,{ref:d})))}),s?ne().createElement(P.Loading,null):null)}on.defaultProps={eventRef:void 0,gamesData:[],isNumberRowsLimited:!1,sort:{numberOfRows:1},featureUniverseId:0,isDataFetching:!1,sortPosition:-1,pageContext:{pageId:null}},on.propTypes={eventRef:i().oneOfType([i().func,i().shape({current:i().instanceOf(Element)})]),gamesData:i().arrayOf(i().shape({universeId:i().number})),sort:i().shape({numberOfRows:i().number,name:i().string}),isNumberRowsLimited:i().bool,pageType:i().string.isRequired,featureUniverseId:i().number,isDataFetching:i().bool,sortPosition:i().number,pageContext:i().shape({pageId:i().string}),translate:i().func.isRequired};var sn=on;function ln(e){var t=e.translate,n=e.headerLabel,r=e.seeAllLink,e=e.isSeeAllHidden,e=re()(j.seeAllClass,{hidden:e});return ne().createElement("div",{"data-testid":"game-lists-game-container-header",className:"container-header games-filter-changer"},ne().createElement("h2",null,ne().createElement(f.NavLink,{to:r},n)),ne().createElement(f.NavLink,{"data-testid":"game-lists-game-container-header-see-all-button",to:r,className:e},t(j.seeAllLinkLabel)))}ln.defaultProps={isSeeAllHidden:!1},ln.propTypes={translate:i().func.isRequired,headerLabel:i().string.isRequired,seeAllLink:i().string.isRequired,isSeeAllHidden:i().bool};var un,cn,dn=ln;function fn(){return(fn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function mn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gn(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),o=0;o<a.length;o++)n=a[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function hn(e){var t=e.sort,n=e.pageContext,r=e.sortPosition,a=e.sortStyle,o=e.timeFilters,i=e.isExploreSortContentsShadowEnabled,s=gn(e,["sort","pageContext","sortPosition","sortStyle","timeFilters","isExploreSortContentsShadowEnabled"]),l=pn((0,te.useState)([]),2),u=l[0],c=l[1],d=t.token,f=t.displayName,m=t.name,p=t.numberOfRows,v=t.gameSetTargetId,e=t.contextCountryRegionId,l=t.timeOptionsAvailable,e={sortToken:d,gameSetTargetId:v,startRows:T.params.startRows,maxRows:a===ke.featureGameTile?Ge:Le,hasMoreRows:!0,sortPosition:r,contextCountryRegionId:e};l&&(e.timeFilter=O(o)),e["pageContext.pageId"]=null==n?void 0:n.pageId;function g(n,e){!(S||!h.hasMoreRows)&&(null==u?void 0:u.length)<=De&&(e&&w(!0),E(!0),N(h).then(function(t){var e;!n&&null!=t&&t.games&&(c(function(e){return e.concat(t.games)}),e=R(t,h),y(e)),i&&C(b)},function(){n||y(function(e){return Object.assign(e,{hasMoreRows:!1})})}).finally(function(){!n&&e&&w(!1),n||E(!1)}))}var o=pn((0,te.useState)(e),2),h=o[0],y=o[1],b={sessionId:d,sortId:m},e=pn((0,te.useState)(!1),2),o=e[0],w=e[1],d=pn((0,te.useState)(!1),2),S=d[0],E=d[1],e=Ut(Dt.DiscoverPageSessionInfo);(0,te.useEffect)(function(){return g(!1,!0),function(){}},[]);e=wt((mn(d={},Ct.Position,r),mn(d,Ct.GameSetTypeId,t.gameSetTypeId),mn(d,Ct.GameSetTargetId,t.gameSetTargetId),mn(d,Ct.Page,Ot.GamesPage),mn(d,Ct.TreatmentType,cn.Carousel),mn(d,Dt.DiscoverPageSessionInfo,e),d)),d="sortName/".concat(t.name).concat(e),e=re()("games-list-container",{"is-windows":null===I.jsClientDeviceIdentifier||void 0===I.jsClientDeviceIdentifier?void 0:I.jsClientDeviceIdentifier.isWindows});return ne().createElement("div",{"data-testid":"game-carousel-games-container",className:e},ne().createElement(dn,fn({headerLabel:f,seeAllLink:d},s)),o?ne().createElement(P.Loading,null):null,0<u.length&&ne().createElement("div",{className:re()("horizontal-scroller games-list",{"large-tiles":a===ke.featureGameTile})},1===p&&ne().createElement(Xt,fn({gamesData:u,name:m,loadMore:g,sortApiParams:h,pageContext:n,sortPosition:r,sortStyle:a,sort:t,isInitializedLoading:o},s)),1<p&&ne().createElement(sn,fn({gamesData:u,pageType:Re.gameCarousel,isNumberRowsLimited:!0,sort:t,sortPosition:r,pageContext:n},s))))}(o={}).Melee="Melee",o.Ranged="Ranged",o.Explosive="Explosive",o.PowerUps="PowerUps",o.Navigation="Navigation",o.Music="Music",o.Social="Social",o.Building="Building",o.PersonalTransport="PersonalTransport",(Pt=un=un||{}).Home="Home",Pt.Games="Games",(o=cn=cn||{}).Carousel="Carousel",o.GenreExplorerLabel="GenreExplorerLabel",(Pt={}).Invalid="Invalid",Pt.HasLootBoxes="HasLootBoxes",Pt.HasInGameTrading="HasInGameTrading",Pt.IsUsingLootBoxApi="IsUsingLootBoxApi",Pt.IsUsingInGameTradingApi="IsUsingInGameTradingApi",Pt.HasAllowedExternalLinkReferences="HasAllowedExternalLinkReferences",Pt.IsUsingAllowedExternalLinkReferencesApi="IsUsingAllowedExternalLinkReferencesApi",(o={}).MorphToR6="MorphToR6",o.PlayerChoice="PlayerChoice",o.MorphToR15="MorphToR15",hn.propTypes={sort:i().shape({token:i().string,displayName:i().string,name:i().string,numberOfRows:i().number,gameSetTargetId:i().number,gameSetTypeId:i().number,contextCountryRegionId:i().number,timeOptionsAvailable:i().bool,treatmentType:i().string}).isRequired,pageContext:i().shape({pageId:i().string}).isRequired,sortPosition:i().number.isRequired,sortStyle:i().string.isRequired,timeFilters:i().arrayOf(i().shape({token:i().string,name:i().string})).isRequired,isExploreSortContentsShadowEnabled:i().bool,translate:i().func.isRequired},hn.defaultProps={isExploreSortContentsShadowEnabled:!1};var yn=hn;function bn(){return(bn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function wn(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function Sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return En(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return En(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function En(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function In(n){var e=n.translate,t=Sn((0,te.useState)([]),2),r=t[0],a=t[1],o=(t=Sn((0,te.useState)(""),2))[0],i=t[1],s=(t=Sn((0,te.useState)([]),2))[0],l=t[1],u=(t=Sn((0,te.useState)({}),2))[0],c=t[1],d=(t=Sn((0,te.useState)(!1),2))[0],f=t[1];return Ut(Dt.DiscoverPageSessionInfo,!0),(0,te.useEffect)(function(){var t=!0;return b(null,!0).then(function(e){t&&(c(null==e?void 0:e.pageContext),i(Ae&&null!=e&&e.gameSortStyle?e.gameSortStyle:""),l(null==e?void 0:e.timeFilters),null!=e&&e.sorts&&a(e.sorts))},function(e){console.debug(e)}),function(){var s,e=(s=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.ExperimentationService.getAllValuesForLayer(p.discoverPageExperimentLayer);case 2:t=e.sent,f(null==t?void 0:t.IsExploreApiSortContentsShadowEnabled);case 4:case"end":return e.stop()}},e)}),function(){var e=this,i=arguments;return new Promise(function(t,n){var r=s.apply(e,i);function a(e){wn(r,t,n,a,o,"next",e)}function o(e){wn(r,t,n,a,o,"throw",e)}a(void 0)})});return function(){return e.apply(this,arguments)}}()(),function(){t=!1}},[]),ne().createElement(te.Fragment,null,ne().createElement("div",{className:"section"},ne().createElement("div",{className:"games-list-header"},ne().createElement("h1",null,e("Label.Discover")))),0<r.length&&r.map(function(e,t){return ne().createElement(yn,bn({sortPosition:t,sort:e,sortStyle:o,pageContext:u,timeFilters:s,key:e.token+e.displayName,isExploreSortContentsShadowEnabled:d},n))}))}function Pn(e){var t=e.id,n=e.children,r=e.gameData,e=e.buildEventProperties;return ne().createElement(P.Link,{url:de(r.placeId,r.name,e(r,t)),className:"game-card-link",id:r.universeId.toString()},ne().createElement(E.Thumbnail2d,{type:E.ThumbnailTypes.gameIcon,size:E.ThumbnailGameIconSize.size150,targetId:r.universeId,containerClass:"game-card-thumb-container",format:E.ThumbnailFormat.jpeg,altName:r.name}),ne().createElement("div",{className:"game-card-name game-name-title",title:r.name},r.name),n)}function xn(e){var t=e.totalDownVotes,n=e.totalUpVotes,e=e.playerCount,t=xt.getVotePercentage(n,t),e=xt.getAbbreviatedValue(e);return ne().createElement("div",{className:"game-card-info","data-testid":"game-tile-stats"},ne().createElement("span",{className:"info-label icon-votes-gray"}),t?ne().createElement("span",{className:"info-label vote-percentage-label"},t):ne().createElement("span",{className:"info-label no-vote"}),ne().createElement("span",{className:"info-label icon-playing-counts-gray"}),ne().createElement("span",{className:"info-label playing-counts-label"},e))}function Tn(e){return e=e.footerText,ne().createElement("div",{className:"game-card-info","data-testid":"game-tile-stats-friend-activity"},ne().createElement("span",{className:"info-label"},e))}function Nn(e){var t=e.friendData,n=e.gameData,r=e.translate,a=(0,te.useState)(!1),e=a[0],o=a[1];if(0===t.length)throw new Error("friendData should not be empty");return ne().createElement("div",{className:"game-card-friend-info game-card-info","data-testid":"game-tile-stats-friends"},ne().createElement("div",{className:"info-avatar",style:{width:22*(t.slice(0,Qn).length-1)+32+"px"}},t.slice(0,Qn).map(function(e){return ne().createElement("div",{className:"avatar-card",role:"button",tabIndex:0,key:e.displayName,onClick:function(e){e.stopPropagation(),e.preventDefault(),o(!0)},onKeyDown:function(e){e.code===Yn.enter&&(e.stopPropagation(),e.preventDefault(),o(!0))}},ne().createElement(E.Thumbnail2d,{type:E.ThumbnailTypes.avatarHeadshot,size:E.ThumbnailAvatarHeadshotSize.size48,targetId:e.id,containerClass:"avatar avatar-headshot avatar-headshot-xs",imgClassName:"avatar-card-image",format:E.ThumbnailFormat.png,altName:e.displayName}))})),r&&ne().createElement("span",{className:"info-label text-overflow","data-testid":"game-tile-stats-info-label"},t.length>$n?r(Vn.LabelPlayingOnePlusUsersWithComma,{username:t[0].displayName,count:t.length-$n}):r(Vn.LabelPlayingOneUser,{user:t[0].displayName})),ne().createElement(Jn,{friendsDataInGame:t,game:n,show:e,onHide:function(e){e.stopPropagation(),e.preventDefault(),o(!1)}}))}var Cn=m.EnvironmentUrls.gamesApi,Rn={url:{getOmniRecommendations:function(e,t){return{url:Cn+"/v1/games/omni-recommendations?model.pageType="+e+(void 0!==t?"&model.sessionId="+t:""),withCredentials:!0}},getOmniRecommendationsMetadata:{url:Cn+"/v1/games/omni-recommendations-metadata",withCredentials:!0},getGameList:{url:Cn+"/v1/games/list",withCredentials:!0},getGamePasses:function(e,t){return{url:c.urlService.getAbsoluteUrl("/Games/GetGamePassesPaged?placeId="+e+"&startIndex=0&maxRows="+t),withCredentials:!0}},getGameRecommendations:function(e){return{url:Cn+"/v1/games/recommendations/game/"+e,withCredentials:!0}},getGameSorts:{url:Cn+"/v1/games/sorts",withCredentials:!0},getUniverseVoiceStatus:function(e){return{withCredentials:!0,url:m.EnvironmentUrls.voiceApi+"/v1/settings/universe/"+e}},getVoiceOptInStatus:{withCredentials:!0,url:m.EnvironmentUrls.voiceApi+"/v1/settings/user-opt-in"}},defaultCacheCriteria:{refreshCache:!1,expirationWindowMS:3e4,useCache:!0}},On=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},Dn=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},kn=function(e,t){var n={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},An=Rn.url,Gn=Rn.defaultCacheCriteria,Ln=x.dataStores.gamesDataStore,jn=x.dataStores.userDataStoreV2,Mn=x.dataStores.userDataStore.FriendsUserSortType,Un=function(){return jn.getFriends({userId:null===I.authenticatedUser||void 0===I.authenticatedUser?void 0:I.authenticatedUser.id,userSort:Mn.StatusFrequents,isGuest:!1},Gn)},Fn=function(r,a,o,i,s,l){return On(void 0,void 0,Promise,function(){var t,n;return Dn(this,function(e){switch(e.label){case 0:return[4,c.httpService.get(An.getGameList,{sortToken:r,gameSetTargetId:s,contextCountryRegionId:a,exclusiveStartId:l,startRows:o,maxRows:i})];case 1:return n=e.sent().data,t=n.games,t=void 0===t?[]:t,n=kn(n,["games"]),[2,{games:t,metaData:n}]}})})},Hn=function(){return On(void 0,void 0,Promise,function(){return Dn(this,function(e){switch(e.label){case 0:return[4,c.httpService.get(Rn.url.getGameSorts,{gameSortsContext:"GamesDefaultSorts"})];case 1:return[2,{sorts:e.sent().data.sorts}]}})})},qn=function(t,n){return On(void 0,void 0,Promise,function(){return Dn(this,function(e){switch(e.label){case 0:return[4,c.httpService.get(Rn.url.getOmniRecommendations(t,n))];case 1:return[2,e.sent().data]}})})},_n=function(t){return On(void 0,void 0,Promise,function(){return Dn(this,function(e){switch(e.label){case 0:return[4,c.httpService.post(Rn.url.getOmniRecommendationsMetadata,{Contents:t})];case 1:return[2,e.sent().data]}})})},zn=function(n){return On(void 0,void 0,Promise,function(){var t;return Dn(this,function(e){switch(e.label){case 0:return[4,Ln.getPlaceDetails([n])];case 1:return t=e.sent().data,[2,(void 0===t?[]:t)[0]]}})})},Vn={LabelSponsoredAd:"Label.SponsoredAd",LabelNoSearchResults:"LabelNoSearchResults",LabelPlayingOnePlusUsersWithComma:"LabelPlayingOnePlusUsersWithComma",LabelPlayingOneUser:"LabelPlayingOneUser",LabelBy:"LabelCreatorBy",LabelByPrefix:"Label.By"},Bn={LabelApiError:"Label.ApiError",LabelGames:"Label.Games"},Pt={common:["Common.GameSorts"],feature:"Feature.PlacesList"},Wn=function(){return(Wn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Yn=ge.keyBoardEventCode,Qn=ge.numberOfInGameIcons,$n=ge.numberOfInGameNames;Nn.defaultProps={translate:void 0};var Jn=(0,t.withTranslations)(function(e){var t=e.show,n=e.onHide,r=e.friendsDataInGame,a=e.game,e=e.translate;return ne().createElement(P.Modal,{show:t,onHide:n,size:"lg"},ne().createElement(se,{friendsData:r.map(function(e){return Wn(Wn({},e),{nameForDisplay:e.displayName})}),friendsInGame:r.map(function(e){return e.id}),game:a,dismissModal:n,translate:e}))},Pt),Kn=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},Zn=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Xn=(0,te.forwardRef)(function(e,t){var n=e.id,r=e.buildEventProperties,a=e.gameData,e=e.friendData,o=void 0===e?[]:e,e=(0,te.useState)(),i=e[0],s=e[1],l=(0,te.useMemo)(function(){return ht(o,a.universeId)},[o,a.universeId]);(0,te.useEffect)(function(){void 0===i&&0<l.length&&Kn(void 0,void 0,void 0,function(){var t;return Zn(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,zn(a.placeId.toString())];case 1:return t=e.sent(),s(t),[3,3];case 2:return t=e.sent(),console.error(t),[3,3];case 3:return[2]}})})},[l,i]);return ne().createElement("div",{ref:t,className:"grid-item-container game-card-container","data-testid":"game-tile"},ne().createElement(Pn,{id:n,buildEventProperties:r,gameData:a},0<l.length&&i?ne().createElement(Nn,{friendData:l,gameData:i}):null!=a&&a.friendActivityTitle?ne().createElement(Tn,{footerText:a.friendActivityTitle}):ne().createElement(xn,{totalUpVotes:a.totalUpVotes,totalDownVotes:a.totalDownVotes,playerCount:a.playerCount})))});function er(e){var t=e.loadData,n=(0,te.useRef)(null),r=(0,te.useRef)(null);return(0,te.useEffect)(function(){var e=n.current;return e&&(r.current=x.elementVisibilityService.observeVisibility({element:e,threshold:he},function(e){e&&t&&t()})),function(){null!=r&&r.current&&r.current()}},[t]),t?ne().createElement("div",{ref:n,"data-testid":"sentinel-tile",className:"grid-item-container game-card-container invisible"}):null}Xn.displayName="GameTile",er.displayName="SentinelTile",er.defaultProps={loadData:null};var tr=(0,te.forwardRef)(function(e,t){var n=e.translate,r=e.id,a=e.buildEventProperties,e=e.gameData;return ne().createElement("div",{ref:t,className:"grid-item-container game-card-container","data-testid":"game-tile-sponsored"},ne().createElement(Pn,{id:r,buildEventProperties:a,gameData:e},ne().createElement("div",{className:"game-card-native-ad"},ne().createElement("div",{className:"native-ad-label"},n(Vn.LabelSponsoredAd)))))});function nr(e){var t=e.universeId,n=e.creatorName,r=e.creatorType,a=e.creatorId,o=e.linkUrl,i=e.isCreatorVerified,s=e.translate,e=(0,te.useRef)(null);return ne().createElement("div",{ref:e,className:"game-card-creator-name"},ne().createElement("span",{className:"text-label creator-name-label"},s(Vn.LabelByPrefix)," "),ne().createElement("a",{href:o,onClick:function(){m.EventStream.SendEventWithTarget("buttonClick","featuredTileCreatorLabel",{creatorId:a,creatorType:r,universeId:t},m.EventStream.TargetTypes.WWW)},className:"text-overflow text-label creator-name"},n),i&&ne().createElement(rr.VerifiedBadgeIconContainer,{size:rr.BadgeSizes.CAPTIONHEADER}))}tr.displayName="SponsoredGameTile";var rr=RobloxBadges,ar=function(){return(ar=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},or=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},ir=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};function sr(){function r(e){(e.detail||[]).forEach(function(e){o.current[e.userId]&&(o.current[e.userId]=ar(ar({},o.current[e.userId]),{presence:e}))}),a(ar({},o.current))}var e=this,t=(0,te.useState)({}),n=t[0],a=t[1],o=(0,te.useRef)(n);return(0,te.useEffect)(function(){return or(e,void 0,void 0,function(){var t,n;return ir(this,function(e){switch(e.label){case 0:if((null==(t=I.deviceMeta.getDeviceMeta())?void 0:t.deviceType)!==I.deviceMeta.DeviceTypes.computer)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Un()];case 2:return n=e.sent().userData,n=(n||[]).reduce(function(e,t){return e[t.id]=t,e},{}),o.current=n,a(ar({},o.current)),document.addEventListener("Roblox.Presence.Update",r),[3,4];case 3:return n=e.sent(),console.error("useFriendsPresence failed to initialized with the error",n),[3,4];case 4:return[2]}})}),function(){document.removeEventListener("Roblox.Presence.Update",r)}},[]),Object.values(n)}var lr=m.EnvironmentUrls.apiGatewayUrl,ur={getExperimentationValues:function(e,t,n){return{url:lr+"/product-experimentation-platform/v1/projects/"+e+"/layers/"+t+"/values?parameters="+n.join(","),withCredentials:!0}}},o={homePage:{AvatarHomepageRecommendationsRowNum:0,IsDiscoveryApiEnabled:!0},serverTab:{ShouldDisableJoinButtonForFullServers:!1},gameDetails:{ShouldHidePrivateServersInAboutTab:!1},searchPage:{ShouldShowFeaturedTileCreatorName:!0,ShouldUseOmniSearchAPI:!1,ShouldUseSentinelTile:!1},discoverPage:{IsExploreApiSortContentsShadowEnabled:!1}},i={homePage:"PlayerApp.HomePage.UX",serverTab:"GameDetails.ServersTab",gameDetails:"Website.GameDetails",searchPage:"Website.SearchResultsPage",discoverPage:"GameDiscovery.GameSorts"},cr={url:{getOmniRecommendations:{url:(Pt=m.EnvironmentUrls.apiGatewayUrl)+"/discovery-api/omni-recommendation",withCredentials:!0},getOmniRecommendationsMetadata:{url:Pt+"/discovery-api/omni-recommendation-metadata",withCredentials:!0},getOmniSearch:{url:Pt+"/search-api/omni-search",withCredentials:!0},getExploreSortContents:{url:Pt+"/explore-api/v1/get-sort-content",withCredentials:!0}},exploreApiSupportSortNames:["Curated_56","Curated_57","Curated_58","Curated_62","Curated_63","Curated_64","Curated_67","Curated_68","Curated_71","Curated_72","Curated_81","Curated_94","Curated_95","Curated_96","Curated_97","Curated_101","Curated_102","Curated_103","Curated_158","Curated_169","TopRated","TopGrossing","MostEngaging","Popular","PersonalRecommendation","PopularInCountry"]};function dr(e){var t=e.universeId,n=e.placeId,r=(e=Ir(t))[0],a=e[1];switch(r){case void 0:return ne().createElement("div",{className:"shimmer play-button game-card-thumb-container","data-testid":"play-button-default"});case Pr.GuestProhibited:case Pr.Playable:return ne().createElement(xr,{universeId:t,placeId:n,status:r});case Pr.PurchaseRequired:return ne().createElement(Tr,{universeId:t,placeId:n,iconClassName:"icon-common-play",refetchPlayabilityStatus:a});case Pr.UniverseRootPlaceIsPrivate:return ne().createElement("div",{className:"btn-growth-lg play-button"},ne().createElement("span",{className:"icon-status-private"}));default:return ne().createElement("div",{className:"btn-growth-lg play-button"},ne().createElement("span",{className:"icon-status-unavailable"}))}}(Pt={}).Game="Game",Pt.CatalogAsset="CatalogAsset",Pt.CatalogBundle="CatalogBundle",(Pt={}).Carousel="Carousel",Pt.AvatarCarousel="AvatarCarousel",Pt.GenreExplorerLabel="GenreExplorerLabel",(Pt={}).Sponsored="Sponsored",Pt.SponsoredGame="SponsoredGame";var fr=function(){return(fr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},mr=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},pr=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},vr=function(r,a,o){return void 0===o&&(o=1),mr(void 0,void 0,Promise,function(){var n,t;return pr(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,c.httpService.get(ur.getExperimentationValues(o,r,Object.keys(a)))];case 1:return n=e.sent().data,t=Object.keys(n).reduce(function(e,t){return null!==n[t]&&(e[t]=n[t]),e},{}),[2,fr(fr({},a),t)];case 2:return e.sent(),[2,a];case 3:return[2]}})})},gr=function(r,a){return mr(void 0,void 0,Promise,function(){var t,n;return pr(this,function(e){switch(e.label){case 0:return t={pageType:r,sessionId:a||c.uuidService.generateRandomUuid()},[4,c.httpService.post(cr.url.getOmniRecommendations,t)];case 1:return n=e.sent().data,Object.keys(n.contentMetadata.Game).forEach(function(e){e=n.contentMetadata.Game[e];e.placeId=e.rootPlaceId}),[2,n]}})})},hr=function(n,r){return mr(void 0,void 0,Promise,function(){var t;return pr(this,function(e){switch(e.label){case 0:return[4,c.httpService.post(cr.url.getOmniRecommendationsMetadata,{contents:n,sessionId:r||c.uuidService.generateRandomUuid()})];case 1:return t=e.sent().data,Object.keys(t.contentMetadata.Game).forEach(function(e){e=t.contentMetadata.Game[e];e.placeId=e.rootPlaceId}),[2,t]}})})},yr=function(e){return cr.exploreApiSupportSortNames.includes(e.sortId)&&c.httpService.get(cr.url.getExploreSortContents,e).catch(function(){}),null},br=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},wr=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Sr=i,Er=o,Ir=m.PlayButton.usePlayabilityStatus,Pr=m.PlayButton.PlayabilityStatuses,xr=m.PlayButton.PlayButton,Tr=m.PlayButton.PurchaseButton,Nr=(0,te.forwardRef)(function(e,t){var n=e.id,r=e.buildEventProperties,a=e.gameData,o=e.translate,i=(0,te.useState)(),s=i[0],l=i[1],e=(0,te.useState)(!1),i=e[0],u=e[1],c=sr(),d=(0,te.useMemo)(function(){return ht(c,a.universeId)},[c,a.universeId]),e=(0,te.useMemo)(function(){return 0<d.length&&s?ne().createElement(Nn,{gameData:s,friendData:d,translate:o}):ne().createElement("div",{className:"game-card-description-info font-body","data-testid":"featured-grid-tile-description"},null==s?void 0:s.description)},[d]);(0,te.useEffect)(function(){br(void 0,void 0,void 0,function(){var t;return wr(this,function(e){switch(e.label){case 0:return[4,vr(Sr.searchPage,Er.searchPage)];case 1:return null!=(null==(t=e.sent())?void 0:t.ShouldShowFeaturedTileCreatorName)&&u(t.ShouldShowFeaturedTileCreatorName),[2]}})});br(void 0,void 0,void 0,function(){var t;return wr(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,zn(a.placeId.toString())];case 1:return t=e.sent(),l(t),[3,3];case 2:return t=e.sent(),console.error(t),[3,3];case 3:return[2]}})})},[]);n=ee(a.placeId,a.name,r(a,n));return ne().createElement("div",{ref:t,className:"featured-grid-item-container game-card-container","data-testid":"game-tile-featured"},ne().createElement(P.Link,{url:n,className:"game-card-link",id:a.universeId.toString()},ne().createElement(E.Thumbnail2d,{type:E.ThumbnailTypes.gameIcon,size:E.ThumbnailGameIconSize.size512,targetId:a.universeId,containerClass:"game-card-thumb-container",format:E.ThumbnailFormat.jpeg,altName:a.name}),ne().createElement("div",{className:"game-card-name-info"},ne().createElement("div",null,ne().createElement("div",{className:"game-card-name game-name-title",title:a.name},a.name),ne().createElement(xn,{totalUpVotes:a.totalUpVotes,totalDownVotes:a.totalDownVotes,playerCount:a.playerCount})),ne().createElement(dr,{universeId:a.universeId.toString(),placeId:a.placeId.toString()})),i&&null!==a.creatorName&&ne().createElement(nr,{universeId:a.universeId.toString(),creatorId:a.creatorId,creatorType:a.creatorType,creatorName:a.creatorName,isCreatorVerified:null!==(i=a.creatorHasVerifiedBadge)&&void 0!==i&&i,linkUrl:n,translate:o}),e))});Nr.displayName="FeaturedGridTile";var Cr=function(){return(Cr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},Rr=function(e,t){var n={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},Or=(0,te.forwardRef)(function(e,t){var n=e.emphasis,e=Rr(e,["emphasis"]);return e.gameData.isShowSponsoredLabel?ne().createElement(tr,Cr({ref:t},e)):n?ne().createElement(Nr,Cr({ref:t},e)):ne().createElement(Xn,Cr({ref:t},e))});Or.displayName="GameGridTile";var Dr=(0,te.forwardRef)(function(e,t){var n=e.gameData,r=e.translate,a=e.emphasis,o=e.buildEventProperties,i=e.tileRef,s=e.loadData,e=e.shouldUseSentinelTile;return ne().createElement("div",{"data-testid":"game-grid",ref:t,className:"game-grid"},n.map(function(e,t){return ne().createElement(Or,{ref:function(e){(!0===a&&1===t||!1===a&&0===t)&&i&&(i.current=e)},key:t,id:t,gameData:e,translate:r,buildEventProperties:o,emphasis:!0===a&&0===t})}),e&&ne().createElement(er,{loadData:s}))});function kr(n,e,t,r){function a(){var e=[],t=r(m.current,v.current,g.current,h.current,null===(t=n.current)||void 0===t?void 0:t.clientWidth,null===(t=n.current)||void 0===t?void 0:t.clientHeight);t&&(e=xt.calculateImpressedIndexes(y.current,t)),xt.splitArray(e,ge.maxTilesInGameImpressionsEvent).forEach(function(e){var t,n=0!==e.length?p.current(e):void 0;void 0!==n&&0<n.absPositions.length&&(t=n.absPositions,void 0===y.current?y.current=[t[0],t[t.length-1]]:(e=(y.current[0]<t[0]?y.current:t)[0],t=y.current[1]>t[t.length-1]?y.current[1]:t[t.length-1],y.current=[e,t]),n=Ft.gameImpressions(n),x.eventStreamService.sendEvent.apply(x.eventStreamService,n))})}function o(){w(),E(),window.removeEventListener("scroll",b),window.removeEventListener("resize",S)}var i=(0,te.useState)(window.innerWidth),s=i[0],l=i[1],u=(d=(0,te.useState)(window.innerHeight))[0],c=d[1],d=(i=(0,te.useState)(window.pageYOffset))[0],f=i[1],m=(0,te.useRef)(e),p=(0,te.useRef)(t),v=(0,te.useRef)(s),g=(0,te.useRef)(u),h=(0,te.useRef)(d),y=(0,te.useRef)(void 0),b=(i=Ee(function(){h.current=window.pageYOffset,g.current=window.innerHeight,f(window.pageYOffset),c(window.innerHeight),a()}))[0],w=i[1],S=(i=Ee(function(){v.current=window.innerWidth,g.current=window.innerHeight,h.current=window.pageYOffset,f(window.pageYOffset),c(window.innerHeight),l(window.innerWidth),a()}))[0],E=i[1];return(0,te.useEffect)(function(){return window.addEventListener("scroll",b),window.addEventListener("resize",S),o},[]),(0,te.useEffect)(function(){m.current=e,p.current=t,a()},[t,e]),[u,s,d]}function Ar(e){var a=e.sort,t=e.translate,n=(0,te.useRef)(null),r=(0,te.useRef)(null),o=(e=(0,te.useState)(0))[0],i=e[1],s=(e=(0,te.useState)({}))[0],l=e[1],u=(e=(0,te.useState)(void 0))[0],c=e[1],d=(e=(0,te.useState)(!0))[0],f=e[1],m=Ut(Dt.DiscoverPageSessionInfo),p=(0,te.useCallback)(function(){return Fr(void 0,void 0,void 0,function(){var t,n,r;return Hr(this,function(e){switch(e.label){case 0:f(!0),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Fn(a.token,a.contextCountryRegionId,o,ge.numberOfGameTilesPerLoad,a.gameSetTargetId,s.nextPageExclusiveStartId)];case 2:return r=e.sent(),t=r.games,n=r.metaData,g().unstable_batchedUpdates(function(){c(qr(qr([],u||[]),t)),i(function(e){return e+ge.numberOfGameTilesPerLoad}),l(n)}),function(){return Fr(void 0,void 0,void 0,function(){var t;return Hr(this,function(e){switch(e.label){case 0:return[4,vr(_r.discoverPage,zr.discoverPage)];case 1:return null!=(t=e.sent())&&t.IsExploreApiSortContentsShadowEnabled&&yr({sortId:a.name,sessionId:a.token}),[2]}})})}(),[3,4];case 3:return r=e.sent(),console.error(r),[3,4];case 4:return f(!1),[2]}})})},[o,s,u,a]),v=(0,te.useCallback)(function(){var e=((null===(e=n.current)||void 0===e?void 0:e.offsetTop)||0)+((null===(t=n.current)||void 0===t?void 0:t.clientHeight)||0),t=window.pageYOffset+window.innerHeight;e<t&&!1===(null==s?void 0:s.hasMoreRows)?window.removeEventListener("scroll",v):e<t&&!0===(null==s?void 0:s.hasMoreRows)&&!1===d&&p()},[null==s?void 0:s.hasMoreRows,p,d]),e=(0,te.useCallback)(function(e){if(void 0!==u){var t=e.filter(function(e){return e<(null==u?void 0:u.length)});return(e={})[Ct.RootPlaceIds]=t.map(function(e){return u[e].placeId}),e[Ct.UniverseIds]=t.map(function(e){return u[e].universeId}),e[Ct.AbsPositions]=t,e[Ct.AdsPositions]=t.map(function(e){return u[e].isSponsored?1:0}),e[Ct.EmphasisFlag]=!1,e[Ct.GameSetTypeId]=a.gameSetTypeId,e[Ct.GameSetTargetId]=a.gameSetTargetId,e[Ct.Page]=Ot.SortDetailPageDiscover,e[Dt.DiscoverPageSessionInfo]=m,e}},[u,m]);return kr(r,!1,e,Ur.calculateViewedGameData),(0,te.useEffect)(function(){return window.addEventListener("scroll",v),function(){window.removeEventListener("scroll",v)}},[v,a]),(0,te.useEffect)(function(){c(void 0),p()},[a]),ne().createElement(ne().Fragment,null,ne().createElement(Dr,{ref:n,emphasis:!1,tileRef:r,gameData:u||[],translate:t,buildEventProperties:function(e,t){var n={};return n[Ct.PlaceId]=e.placeId,n[Ct.UniverseId]=e.universeId,n[Ct.IsAd]=e.isSponsored,n[Ct.NativeAdData]=e.nativeAdData,n[Ct.Position]=t,n[Ct.NumberOfLoadedTiles]=(u||[]).length,n[Ct.GameSetTypeId]=a.gameSetTypeId,n[Ct.GameSetTargetId]=a.gameSetTargetId,n[Ct.Page]=Ot.SortDetailPageDiscover,n[Dt.DiscoverPageSessionInfo]=m,n}}),d&&ne().createElement(P.Loading,null))}function Gr(r,a,o){return Vr(void 0,void 0,Promise,function(){var t,n;return Br(this,function(e){switch(e.label){case 0:t=null;try{t=x.localStorageService.getLocalStorage(r)}catch(e){t=null}return null!==t&&t.userId===m.CurrentUser.userId&&o(t)?[2,t.data]:[4,a()];case 1:return n=e.sent(),x.localStorageService.setLocalStorage(r,{data:n,userId:m.CurrentUser.userId||"guest",time:(new Date).getTime()}),[2,n]}})})}Dr.displayName="GameGrid";var Lr=function(){return(Lr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},jr={paddingSize:10,featureTileDifference:1},Pt=Lr(Lr({},jr),{calculateViewedGameData:function(e,t,n,r,a,o){if(a&&o){t=Math.floor((t-2*jr.paddingSize)/a),a=t*Math.round(r/o),o=t*Math.round((r+n)/o);return[a=e?Math.max(a-jr.featureTileDifference,0):a,o=e?o-jr.featureTileDifference:o]}}}),Mr={paddingSize:12,horizontalGutterSize:12,verticalGutterSize:24,featureTileDifference:3},Ur=Lr(Lr({},Mr),{calculateViewedGameData:function(e,t,n,r,a,o){if(a&&o){t=Math.floor((t-Mr.paddingSize)/(a+Mr.horizontalGutterSize)),a=t*Math.round((r-Mr.paddingSize)/(o+Mr.verticalGutterSize)),o=t*Math.round((r+n-Mr.paddingSize)/(o+Mr.verticalGutterSize));return[a=e?Math.max(a-Mr.featureTileDifference,0):a,o=e?o-Mr.featureTileDifference:o]}}}),Fr=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},Hr=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},qr=function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},_r=i,zr=o,Vr=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},Br=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Wr=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},Yr=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Qr="gameSort",$r=function(){return Wr(void 0,void 0,void 0,function(){return Yr(this,function(e){return[2,Gr(Qr,Hn,function(e){return e.time+e.data.sorts[0].tokenExpiryInSeconds>(new Date).getTime()})]})})},Jr=P.Button.variants;function Kr(e){var r=e.sort,t=e.translate,a=e.homePageSessionInfo,n=(0,te.useRef)(null),o=(0,te.useRef)(null),i=(e=(0,te.useState)(void 0))[0],s=e[1],l=(e=(0,te.useState)(!0))[0],u=e[1],c=(0,te.useCallback)(function(){return(i||[]).length<r.recommendationList.length},[i,r]),d=(0,te.useCallback)(function(){return la(void 0,void 0,void 0,function(){var n,t;return ua(this,function(e){switch(e.label){case 0:u(!0),t=(i||[]).length,t=r.recommendationList.slice(t,t+ge.numberOfGameTilesPerLoad),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,hr(t,a)];case 2:return n=e.sent().contentMetadata,s(ca(ca([],i||[]),t.map(function(e){var t=n[e.contentType][e.contentId];return t.nativeAdData=e.contentMetadata.EncryptedAdTrackingData,t.isSponsored=0<(null===(e=t.nativeAdData)||void 0===e?void 0:e.length),t}))),[3,4];case 3:return t=e.sent(),console.error(t),[3,4];case 4:return u(!1),[2]}})})},[i,r]),f=(0,te.useCallback)(function(){var e=((null===(e=n.current)||void 0===e?void 0:e.offsetTop)||0)+((null===(t=n.current)||void 0===t?void 0:t.clientHeight)||0),t=window.pageYOffset+window.innerHeight;e<t&&!c()?window.removeEventListener("scroll",f):e<t&&c()&&!1===l&&d()},[c,d,l]),e=(0,te.useCallback)(function(e){if(void 0!==i){var t=e.filter(function(e){return e<(null==i?void 0:i.length)});return(e={})[Ct.RootPlaceIds]=t.map(function(e){return i[e].placeId}),e[Ct.UniverseIds]=t.map(function(e){return i[e].universeId}),e[Ct.AbsPositions]=t,e[Ct.AdsPositions]=t.map(function(e){return i[e].isSponsored?1:0}),e[Ct.GameSetTypeId]=r.topicId,e[Ct.EmphasisFlag]=!1,e[Ct.Page]=Ot.SortDetailPageHome,e[Dt.HomePageSessionInfo]=a,e}},[i,a]);return kr(o,!1,e,Ur.calculateViewedGameData),(0,te.useEffect)(function(){return window.addEventListener("scroll",f),function(){window.removeEventListener("scroll",f)}},[f,r]),(0,te.useEffect)(function(){s(void 0),d()},[r]),ne().createElement(ne().Fragment,null,ne().createElement(Dr,{ref:n,emphasis:!1,tileRef:o,gameData:i||[],translate:t,buildEventProperties:function(e,t){return{placeId:e.placeId,universeId:e.universeId,isAd:null!=r.recommendationList[t].contentMetadata.EncryptedAdTrackingData,nativeAdData:r.recommendationList[t].contentMetadata.EncryptedAdTrackingData,position:t,numberOfLoadedTiles:(i||[]).length,gameSetTypeId:r.topicId,homePageSessionInfo:a,page:Ot.SortDetailPageHome}}}),l&&ne().createElement(P.Loading,null))}function Zr(e){var r=e.sort,t=e.translate,n=(0,te.useRef)(null),a=(0,te.useRef)(null),o=(e=(0,te.useState)(void 0))[0],i=e[1],s=(e=(0,te.useState)(!0))[0],l=e[1],u=Ut(Dt.HomePageSessionInfo),c=(0,te.useCallback)(function(){return(o||[]).length<r.RecommendationList.length},[o,r]),d=(0,te.useCallback)(function(){return pa(void 0,void 0,void 0,function(){var t,n;return va(this,function(e){switch(e.label){case 0:l(!0),n=(o||[]).length,n=r.RecommendationList.slice(n,n+ge.numberOfGameTilesPerLoad),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,_n(n)];case 2:return t=e.sent().ContentMetadata,i(ga(ga([],o||[]),n.map(function(e){return t[e.ContentType][e.ContentId]}))),[3,4];case 3:return n=e.sent(),console.error(n),[3,4];case 4:return l(!1),[2]}})})},[o,r]),f=(0,te.useCallback)(function(){var e=((null===(e=n.current)||void 0===e?void 0:e.offsetTop)||0)+((null===(t=n.current)||void 0===t?void 0:t.clientHeight)||0),t=window.pageYOffset+window.innerHeight;e<t&&!c()?window.removeEventListener("scroll",f):e<t&&c()&&!1===s&&d()},[c,d,s]),e=(0,te.useCallback)(function(e){if(void 0!==o){var t=e.filter(function(e){return e<(null==o?void 0:o.length)});return(e={})[Ct.RootPlaceIds]=t.map(function(e){return o[e].placeId}),e[Ct.UniverseIds]=t.map(function(e){return o[e].universeId}),e[Ct.AbsPositions]=t,e[Ct.AdsPositions]=t.map(function(e){return o[e].isSponsored?1:0}),e[Ct.GameSetTypeId]=r.TopicId,e[Ct.EmphasisFlag]=!1,e[Ct.Page]=Ot.SortDetailPageHome,e[Dt.HomePageSessionInfo]=u,e}},[o,u]);return kr(a,!1,e,Ur.calculateViewedGameData),(0,te.useEffect)(function(){return window.addEventListener("scroll",f),function(){window.removeEventListener("scroll",f)}},[f,r]),(0,te.useEffect)(function(){i(void 0),d()},[r]),ne().createElement(ne().Fragment,null,ne().createElement(Dr,{ref:n,emphasis:!1,tileRef:a,gameData:o||[],translate:t,buildEventProperties:function(e,t){return{placeId:e.placeId,universeId:e.universeId,isAd:e.isSponsored,nativeAdData:e.nativeAdData,position:t,numberOfLoadedTiles:(o||[]).length,gameSetTypeId:r.TopicId,homePageSessionInfo:u,page:Ot.SortDetailPageHome}}}),s&&ne().createElement(P.Loading,null))}function Xr(e){var t=e.match,n=decodeURIComponent(t.params.sortName),e=(a=(0,te.useState)(void 0))[0],r=a[1],t=(0,f.useLocation)(),a=(0,f.useHistory)();return aa(Ft.sortDetailReferral,[Ct.Position,Ct.SortId,Ct.Page,Ct.TreatmentType,Dt.HomePageSessionInfo],[],{},t,a),(0,te.useEffect)(function(){wa(void 0,void 0,void 0,function(){var t;return Sa(this,function(e){switch(e.label){case 0:return[4,vr(Ea.homePage,Ia.homePage)];case 1:return t=e.sent(),r(t.IsDiscoveryApiEnabled),[2]}})})},[]),!1===e?ne().createElement(ba,{sortName:n}):!0===e?ne().createElement(ma,{sortName:n}):ne().createElement(P.Loading,null)}(Pt=function(e){var t=e.errorMessage,n=e.onRefresh,e=e.className;return ne().createElement("div",{"data-testid":"error-status",className:re()("game-error",e)},ne().createElement("span",{className:"icon-spot-error-2xl"}),ne().createElement("p",{className:"text-label error-text"},t),ne().createElement(P.Button,{className:"refresh-button",variant:Jr.control,onClick:n},ne().createElement("span",{className:"icon-common-refresh"})))}).defaultProps={className:""};var ea=Pt,ta=function(){return(ta=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},na=xt.parseQueryString,ra=xt.composeQueryString,aa=function(r,a,o,i,s,l){void 0===i&&(i={}),void 0===s&&(s=window.location),void 0===l&&(l=window.history);var e=(0,te.useState)(na(s.search)),t=e[0],u=e[1];return(0,te.useEffect)(function(){var n,e,t;n=na(s.search),e=a.reduce(function(e,t){return void 0===n[t]&&null===n[t]||(e[t]=n[t]),e},{}),!(t=o.reduce(function(e,t){return void 0===n[t]&&null===n[t]||(e[t]=n[t]),e},{})).launchData&&t.placeId&&delete t.placeId,u(e),zt(e),void 0!==l.replace&&l.replace(""+s.pathname+ra(t)),void 0!==l.replaceState&&l.replaceState(void 0,"",""+s.pathname+s.hash+ra(t)),x.eventStreamService.sendEvent.apply(x.eventStreamService,r(ta(ta({},e),i)))},[]),t},oa=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},ia=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},sa=(0,t.withTranslations)(function(e){var t=e.match,n=e.translate,r=(0,f.useLocation)(),a=(0,f.useHistory)(),o=decodeURIComponent(t.params.sortName),i=(0,te.useState)(void 0),s=i[0],l=i[1],e=(0,te.useState)(!1),t=e[0],u=e[1],i=(0,te.useState)(!1),e=i[0],c=i[1];aa(Ft.sortDetailReferral,[Ct.Position,Ct.GameSetTargetId,Ct.GameSetTypeId,Ct.SortId,Ct.Page,Ct.TreatmentType,Dt.DiscoverPageSessionInfo],[],{},r,a);function d(){return oa(void 0,void 0,void 0,function(){var t;return ia(this,function(e){switch(e.label){case 0:c(!1),l(void 0),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,$r()];case 2:return t=e.sent().sorts,void 0===(t=t.find(function(e){return e.name===o}))?u(!0):l(t),[3,4];case 3:return e.sent(),c(!0),[3,4];case 4:return[2]}})})}return(0,te.useEffect)(function(){d()},[o]),e?ne().createElement("div",{className:"game-sort-detail-container"},ne().createElement("h1",null,n(Bn.LabelGames)),ne().createElement("div",{className:"game-sort-detail"},ne().createElement(ea,{errorMessage:n(Bn.LabelApiError),onRefresh:d}))):t?ne().createElement(f.Redirect,{to:"/"}):s?ne().createElement("div",{className:"game-sort-detail-container"},ne().createElement("h1",null,s.displayName),ne().createElement(Ar,{sort:s,translate:n})):ne().createElement(P.Loading,null)},r),la=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},ua=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},ca=function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},da=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},fa=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},ma=(0,t.withTranslations)(function(e){function t(){return da(void 0,void 0,void 0,function(){var t;return fa(this,function(e){switch(e.label){case 0:c(!1),i(void 0),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,gr(un.Home,s)];case 2:return t=e.sent(),void 0===(t=t.sorts.find(function(e){return e.topic===n}))?u(!0):i(t),[3,4];case 3:return e.sent(),c(!0),[3,4];case 4:return[2]}})})}var n=e.sortName,r=e.translate,a=(0,te.useState)(void 0),o=a[0],i=a[1],s=Ut(Dt.HomePageSessionInfo),l=(0,te.useState)(!1),e=l[0],u=l[1],a=(0,te.useState)(!1),l=a[0],c=a[1];return(0,te.useEffect)(function(){t()},[n]),l?ne().createElement("div",{className:"game-sort-detail-container"},ne().createElement("h1",null,r(Bn.LabelGames)),ne().createElement("div",{className:"game-sort-detail"},ne().createElement(ea,{errorMessage:r(Bn.LabelApiError),onRefresh:t}))):e?ne().createElement(f.Redirect,{to:"/"}):o?ne().createElement("div",{className:"game-sort-detail-container"},ne().createElement("h1",null,n),ne().createElement(Kr,{homePageSessionInfo:s,sort:o,translate:r})):ne().createElement(P.Loading,null)},r),pa=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},va=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},ga=function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},ha=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},ya=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},ba=(0,t.withTranslations)(function(e){function t(){return ha(void 0,void 0,void 0,function(){var t;return ya(this,function(e){switch(e.label){case 0:u(!1),i(void 0),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,qn(un.Home)];case 2:return t=e.sent(),void 0===(t=t.Sorts.find(function(e){return e.Topic===n}))?l(!0):i(t),[3,4];case 3:return e.sent(),u(!0),[3,4];case 4:return[2]}})})}var n=e.sortName,r=e.translate,a=(0,te.useState)(void 0),o=a[0],i=a[1],s=(0,te.useState)(!1),e=s[0],l=s[1],a=(0,te.useState)(!1),s=a[0],u=a[1];return(0,te.useEffect)(function(){t()},[n]),s?ne().createElement("div",{className:"game-sort-detail-container"},ne().createElement("h1",null,r(Bn.LabelGames)),ne().createElement("div",{className:"game-sort-detail"},ne().createElement(ea,{errorMessage:r(Bn.LabelApiError),onRefresh:t}))):e?ne().createElement(f.Redirect,{to:"/"}):o?ne().createElement("div",{className:"game-sort-detail-container"},ne().createElement("h1",null,n),ne().createElement(Zr,{sort:o,translate:r})):ne().createElement(P.Loading,null)},r),wa=function(e,i,s,l){return new(s=s||Promise)(function(n,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function a(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,a)}o((l=l.apply(e,i||[])).next())})},Sa=function(n,r){var a,o,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(i=0<(i=s.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Ea=i,Ia=o,Pa=(0,t.withTranslations)(function(e){return ne().createElement(f.HashRouter,null,ne().createElement(f.Route,{exact:!0,path:"/",render:function(){return ne().createElement(In,e)}}),ne().createElement(f.Route,{exact:!0,path:"/sortName/:sortName",component:sa}),ne().createElement(f.Route,{exact:!0,path:"/sortName/v2/:sortName",component:Xr}))},n);(0,c.ready)(function(){(0,e.render)(ne().createElement(Pa,null),document.getElementById("games-carousel-page"))})}()}();
//# sourceMappingURL=https://js.rbxcdn.com/c2abc85eecf3dc8d6e4036aad03d061d-gameCarousel.bundle.min.js.map

/* Bundle detector */
window.Roblox && window.Roblox.BundleDetector && window.Roblox.BundleDetector.bundleDetected("GameCarousel");